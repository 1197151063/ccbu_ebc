(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-05549a00"],{"2f11":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a("1e04"),i={addEmail:function(e){return Object(r.c)("/email/add",e)},getEmail:function(e){return Object(r.c)("/email/page/query",e)},deleteEmail:function(e){return Object(r.a)("/email/delete/"+e)},getEmailDetails:function(e){return Object(r.a)("/email/detail/"+e)},sendEmail:function(e){return Object(r.a)("/email/send/"+e)},updateEmail:function(e){return Object(r.c)("/email/update",e)}}},4991:function(e,t,a){"use strict";a.r(t);var r=(a("96cf"),a("1da1")),i=(a("7514"),a("2f11")),s={name:"EmailList",components:{},props:{},data:function(){var e=this;return{total:null,searchForm:{endDate:null,pageNum:1,pageSize:10,searchCount:!0,sendStatus:null,startDate:null,title:null},columns:[{title:"创建时间",key:"createTime"},{title:"发送状态",key:"sendStatus",render:function(e,t){return e("span",{},0==t.row.sendStatus?"未发送":"已发送")}},{title:"接收人",key:"toEmails"},{title:"标题",key:"title"},{title:"更新时间",key:"updateTime"},{title:"邮件内容",key:"content"},{title:"操作",key:"action",width:160,align:"center",className:"action-hide",render:function(t,a){return e.$tableAction(t,[{title:"编辑",directives:[{name:"privilege",value:"email-update"}],action:function(){e.editEmail(a)}},{title:"删除",directives:[{name:"privilege",value:"email-delete"}],action:function(){e.deleteEmail(a)}}])}}],tableData:[],delId:null}},computed:{},watch:{},filters:{},created:function(){this.getEmailMess()},methods:{editEmail:function(e){this.$router.push({path:"/email/send-mail",query:{id:e.row.id}})},addNew:function(){this.$router.push({path:"/email/send-mail"})},reset:function(){this.$refs.searchForm.resetFields(),this.searchForm.startDate=null,this.searchForm.endDate=null,this.$set(this.searchForm,"endDate",null),this.find()},deleteSure:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,i.a.deleteEmail(this.delId);case 3:e.sent,this.$Message.success("删除成功"),this.$Spin.hide(),this.getEmailMess();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),deleteEmail:function(e){var t=this;this.delId=e.row.id,this.$Modal.confirm({title:"友情提醒",content:"确定要删除吗？",onOk:function(){t.deleteSure(e.row.id)}})},find:function(){this.searchForm.pageNum=1,this.searchForm.pageSize=10,this.getEmailMess()},changePageSize:function(e){this.searchForm.pageNum=1,this.searchForm.pageSize=e,this.getEmailMess()},getEmailMess:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,i.a.getEmail(this.searchForm);case 3:t=e.sent,this.$Spin.hide(),this.tableData=t.data.list,this.total=t.data.total,t.data.pages<this.searchForm.pageNum&&(this.searchForm.pageNum=t.data.pages);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),changePage:function(e){this.searchForm.pageNum=e,this.getEmailMess()}}},n=a("2877"),l=Object(n.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticClass:"warp-card",attrs:{"dis-hover":""}},[a("Form",{ref:"searchForm",staticClass:"tools",attrs:{model:e.searchForm,inline:""}},[a("FormItem",{attrs:{prop:"startDate"}},[a("DatePicker",{attrs:{placeholder:"请选择开始日期",type:"datetime"},model:{value:e.searchForm.startDate,callback:function(t){e.$set(e.searchForm,"startDate",t)},expression:"searchForm.startDate"}})],1),a("FormItem",{attrs:{prop:"endDate"}},[a("DatePicker",{attrs:{placeholder:"请选择截止日期",type:"datetime"},model:{value:e.searchForm.endDate,callback:function(t){e.$set(e.searchForm,"endDate",t)},expression:"searchForm.endDate"}})],1),a("FormItem",{attrs:{prop:"title"}},[a("Input",{attrs:{placeholder:"请输入标题",type:"text"},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),a("FormItem",{attrs:{prop:"sendStatus"}},[a("Select",{staticStyle:{width:"200px"},model:{value:e.searchForm.sendStatus,callback:function(t){e.$set(e.searchForm,"sendStatus",t)},expression:"searchForm.sendStatus"}},[a("Option",{attrs:{value:1}},[e._v("已发送")]),a("Option",{attrs:{value:0}},[e._v("未发送")])],1)],1),a("FormItem",[a("ButtonGroup",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"email-query",expression:"'email-query'"}],attrs:{icon:"ios-search",type:"primary"},on:{click:e.find}},[e._v("查询")]),a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"email-query",expression:"'email-query'"}],attrs:{icon:"md-refresh",type:"default"},on:{click:e.reset}},[e._v("重置")])],1)],1),a("FormItem",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"email-add",expression:"'email-add'"}],attrs:{icon:"md-add",type:"primary"},on:{click:e.addNew}},[e._v("新增")])],1)],1),a("Table",{attrs:{columns:e.columns,data:e.tableData}}),a("Page",{staticStyle:{margin:"24px 0","text-align":"right"},attrs:{current:e.searchForm.pageNum,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,30,50,100],total:e.total,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)},[],!1,null,null,null);t.default=l.exports}}]);