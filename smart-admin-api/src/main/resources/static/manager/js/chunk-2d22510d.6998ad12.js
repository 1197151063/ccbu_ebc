(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d22510d"],{e38a:function(e,t,r){"use strict";r.r(t);var a=(r("8e6e"),r("ac6a"),r("456d"),r("96cf"),r("1da1")),n=r("ade3"),o=r("f1ed"),i=[10,20,30,50,75,100,150,200,300,500,1e3],s=r("1e04"),l=function(e){return Object(s.c)("/peony/add",e)},c=function(e){return Object(s.c)("/peony/page/query",e)},u=function(e){return Object(s.c)("/peony/deleteByIds",e)},m=function(e){return Object(s.c)("/peony/update",e)},p=function(e){return Object(s.d)("/peony/export/all",e)},d=function(e){return Object(s.d)("/peony/export/batch",e)},h={name:"CodeReviewListForm",components:{},props:{isUpdate:{type:Boolean,default:!0},updateData:{type:Object}},data:function(){return{form:{kind:null,name:null,color:null,imageUrl:null},formValidate:{kind:[{required:!0,message:"请输入品种",trigger:"blur"}],name:[{required:!0,message:"请输入名字",trigger:"blur"}],color:[{required:!0,message:"请输入颜色",trigger:"blur"}],imageUrl:[{required:!0,message:"请输入图片链接",trigger:"blur"}]}}},watch:{updateData:function(e,t){if(this.$refs.form.resetFields(),this.isUpdate){for(var r in this.form)this.$set(this.form,r,e[r]);this.$set(this.form,"id",e.id)}},isUpdate:function(e,t){e||(this.resetForm(),this.$refs.form.resetFields())}},created:function(){},mounted:function(){},methods:{cancel:function(){this.$emit("on-form-close")},save:function(){var e=this;this.$refs.form.validate(function(t){t?e.isUpdate?e.update():e.add():e.$Message.error("参数验证错误，请仔细填写表单数据!")})},resetForm:function(){this.form={kind:null,name:null,color:null,imageUrl:null},this.$refs.form.resetFields()},add:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,l(this.form);case 3:t=e.sent,this.$Message.success(t.msg),this.$Spin.hide(),this.resetForm(),this.$emit("on-form-close");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),update:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,m(this.form);case 3:t=e.sent,this.$Message.success(t.msg),this.$Spin.hide(),this.resetForm(),this.$emit("on-form-close");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},f=r("2877");function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v={name:"PeonyList",components:{PeonyListForm:Object(f.a)(h,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Form",{ref:"form",attrs:{rules:e.formValidate,"label-width":90,model:e.form}},[r("FormItem",{attrs:{label:"品种",prop:"kind"}},[r("Input",{model:{value:e.form.kind,callback:function(t){e.$set(e.form,"kind",t)},expression:"form.kind"}})],1),r("FormItem",{attrs:{label:"名字",prop:"name"}},[r("Input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("FormItem",{attrs:{label:"颜色",prop:"color"}},[r("Input",{model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}})],1),r("FormItem",{attrs:{label:"图片链接",prop:"imageUrl"}},[r("Input",{model:{value:e.form.imageUrl,callback:function(t){e.$set(e.form,"imageUrl",t)},expression:"form.imageUrl"}})],1)],1),r("Row",{staticClass:"code-row-bg",attrs:{justify:"end",type:"flex"}},[r("Button",{staticStyle:{"margin-right":"10px"},on:{click:e.cancel}},[e._v("取消")]),r("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)},[],!1,null,null,null).exports},props:{},data:function(){var e=this;return{saveModal:{show:!1,isUpdate:!1,updateData:null},batchDeleteModal:{show:!1},mainTableSelectArray:[],batchExportBtnLoading:!1,allExportBtnLoading:!1,queryForm:{id:null,kind:null,name:null,color:null,createTimeRange:["",""],updateTimeRange:["",""],pageNum:1,pageSize:20,orders:[]},showMoreQueryConditionFlag:!1,mainTablePage:{total:0,pageSizeOps:i},mainTable:{loading:!1,data:[],columnArray:[{type:"selection",width:30,align:"center"},{title:"ID",key:"id",tableColumn:"t_peony.id",sortable:"custom"},{title:"品种",key:"kind",tableColumn:"t_peony.kind",sortable:"custom"},{title:"名字",key:"name",tableColumn:"t_peony.name",sortable:"custom"},{title:"颜色",key:"color",tableColumn:"t_peony.color",sortable:"custom"},{title:"图片链接",key:"imageUrl",tableColumn:"t_peony.image_url",sortable:"custom",slot:"imageUrl"},{title:"创建时间",key:"createTime",tableColumn:"t_peony.create_time",sortable:"custom"},{title:"更新时间",key:"updateTime",tableColumn:"t_peony.update_time",sortable:"custom"},{title:"操作",key:"action",align:"right",width:130,className:"action-hide",render:function(t,r){var a=[{title:"编辑",directives:[{name:"privilege",value:"peony-list-update"}],action:function(){e.showEditPeonyForm(r.row)}}];return e.$tableAction(t,a)}}]}}},computed:{},watch:{},filters:{},created:function(){},mounted:function(){this.queryList()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{convertQueryParam:function(){var e=Object(o.b)(this.queryForm.createTimeRange),t=Object(o.b)(this.queryForm.updateTimeRange);return g(g({},this.queryForm),{},{createTimeBegin:e[0],createTimeEnd:e[1],updateTimeBegin:t[0],updateTimeEnd:t[1]})},queryList:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.mainTable.loading=!0,e.prev=1,t=this.convertQueryParam(),e.next=5,c(t);case 5:r=e.sent,this.mainTable.data=r.data.list,this.mainTablePage.total=r.data.total;case 8:return e.prev=8,this.mainTable.loading=!1,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[1,,8,11]])}));return function(){return e.apply(this,arguments)}}(),resetQueryList:function(){var e=this.queryForm.pageSize;this.queryForm={id:null,kind:null,name:null,color:null,createTimeRange:["",""],updateTimeRange:["",""],pageNum:1,pageSize:e,orders:[]},this.queryList()},changeMainTablePagePageNum:function(e){this.queryForm.pageNum=e,this.queryList()},changeMainTablePagePageSize:function(e){this.queryForm.pageNum=1,this.queryForm.pageSize=e,this.queryList()},handleSortChange:function(e){"normal"===e.order?this.queryForm.orders=[]:this.queryForm.orders=[{column:e.column.tableColumn,asc:"asc"===e.order}],this.queryList()},showBatchDeleteModal:function(){this.validateMainTableSelection()&&(this.batchDeleteModal.show=!0)},batchDelete:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,u(this.mainTableSelectArray.map(function(e){return e.id}));case 3:this.batchDeleteModal.show=!1,this.$Message.success("刪除成功"),this.$Spin.hide(),this.queryList();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),clearMainTableSelection:function(){this.mainTableSelectArray=[]},validateMainTableSelection:function(){return this.mainTableSelectArray=this.$refs.mainTable.getSelection(),!(this.mainTableSelectArray.length<1&&(this.$Message.error("请选择至少一条数据"),1))},exportAll:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.allExportBtnLoading=!0,t=this.convertQueryParam(),e.next=5,p(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:return e.prev=10,this.allExportBtnLoading=!1,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,7,10,13]])}));return function(){return e.apply(this,arguments)}}(),batchExport:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validateMainTableSelection()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.batchExportBtnLoading=!0,e.next=6,d(this.mainTableSelectArray.map(function(e){return e.id}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2);case 11:return e.prev=11,this.batchExportBtnLoading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[2,8,11,14]])}));return function(){return e.apply(this,arguments)}}(),showAddPeonyForm:function(){this.saveModal.isUpdate=!1,this.saveModal.show=!0},showEditPeonyForm:function(e){this.saveModal.isUpdate=!0,this.saveModal.updateData=e,this.saveModal.show=!0},saveFormClose:function(){this.saveModal.show=!1,this.queryList()}}},b=Object(f.a)(v,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Card",{staticClass:"smart-query-card"},[r("Row",{staticClass:"smart-query-form-row"},[r("span",[e._v("\n                ID :\n                "),r("Input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入ID"},model:{value:e.queryForm.id,callback:function(t){e.$set(e.queryForm,"id",t)},expression:"queryForm.id"}})],1),r("span",[e._v("\n                品种 :\n                "),r("Input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入品种"},model:{value:e.queryForm.kind,callback:function(t){e.$set(e.queryForm,"kind",t)},expression:"queryForm.kind"}})],1),r("span",[e._v("\n                名字 :\n                "),r("Input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入名字"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),r("span",[e._v("\n                颜色 :\n                "),r("Input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入颜色"},model:{value:e.queryForm.color,callback:function(t){e.$set(e.queryForm,"color",t)},expression:"queryForm.color"}})],1),r("ButtonGroup",[r("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"peony-list-query",expression:"'peony-list-query'"}],attrs:{icon:"ios-search",type:"primary"},on:{click:e.queryList}},[e._v("查询")]),r("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"peony-list-query",expression:"'peony-list-query'"}],attrs:{icon:"md-refresh",type:"default"},on:{click:e.resetQueryList}},[e._v("重置")])],1),r("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"peony-list-query",expression:"'peony-list-query'"}],staticStyle:{"margin-left":"20px"},attrs:{icon:"md-more",type:"primary"},on:{click:function(t){e.showMoreQueryConditionFlag=!e.showMoreQueryConditionFlag}}},[e._v(e._s(e.showMoreQueryConditionFlag?"隐藏":"展开"))])],1),r("Row",{directives:[{name:"show",rawName:"v-show",value:e.showMoreQueryConditionFlag,expression:"showMoreQueryConditionFlag"}],staticClass:"smart-query-form-row"},[r("span",[e._v("\n              xxx：\n              "),r("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入xxx"}})],1),r("span",[e._v("\n                创建时间:\n                "),r("DatePicker",{staticStyle:{width:"200px"},attrs:{placeholder:"选择创建日期范围","split-panels":"",type:"daterange"},model:{value:e.queryForm.createTimeRange,callback:function(t){e.$set(e.queryForm,"createTimeRange",t)},expression:"queryForm.createTimeRange"}})],1),r("span",[e._v("\n                更新时间:\n                "),r("DatePicker",{staticStyle:{width:"200px"},attrs:{placeholder:"选择更新日期范围","split-panels":"",type:"daterange"},model:{value:e.queryForm.updateTimeRange,callback:function(t){e.$set(e.queryForm,"updateTimeRange",t)},expression:"queryForm.updateTimeRange"}})],1)])],1),r("Card",{staticClass:"warp-card"},[r("Row",{staticClass:"marginBottom10"},[r("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"peony-list-add",expression:"'peony-list-add'"}],attrs:{icon:"md-add",size:"small",type:"primary"},on:{click:e.showAddPeonyForm}},[e._v("新建数据")]),r("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"peony-list-batch-delete",expression:"'peony-list-batch-delete'"}],staticClass:"marginLeft10",attrs:{icon:"ios-trash-outline",size:"small",type:"error"},on:{click:e.showBatchDeleteModal}},[e._v("批量删除")]),r("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"peony-list-export-all",expression:"'peony-list-export-all'"}],staticClass:"marginLeft10 float-right",attrs:{loading:e.allExportBtnLoading,icon:"ios-cloud-download-outline",size:"small",type:"warning"},on:{click:e.exportAll}},[e._v("导出全部")]),r("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"peony-list-batch-export",expression:"'peony-list-batch-export'"}],staticClass:"marginLeft10 float-right",attrs:{loading:e.batchExportBtnLoading,icon:"ios-download-outline",size:"small",type:"warning"},on:{click:e.batchExport}},[e._v("批量导出")])],1),r("Table",{ref:"mainTable",attrs:{columns:e.mainTable.columnArray,data:e.mainTable.data,loading:e.mainTable.loading,border:"","highlight-row":""},on:{"on-sort-change":e.handleSortChange},scopedSlots:e._u([{key:"imageUrl",fn:function(t){t.row;var a=t.index;return[a%2==0?r("img",{attrs:{width:"40",height:"40",src:"http://q8deiydpv.bkt.clouddn.com/image/peony1.jpg"}}):e._e(),a%2==1?r("img",{attrs:{width:"40",height:"40",src:"http://q8deiydpv.bkt.clouddn.com/image/peony2.jpg"}}):e._e()]}}])}),r("Page",{staticClass:"smart-query-table-page",attrs:{current:e.queryForm.pageNum,"page-size":e.queryForm.pageSize,"page-size-opts":e.mainTablePage.pageSizeOps,total:e.mainTablePage.total,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.changeMainTablePagePageNum,"on-page-size-change":e.changeMainTablePagePageSize}})],1),r("Modal",{attrs:{title:"批量删除",width:"450"},model:{value:e.batchDeleteModal.show,callback:function(t){e.$set(e.batchDeleteModal,"show",t)},expression:"batchDeleteModal.show"}},[r("Form",{attrs:{"label-width":80}},[r("FormItem",[r("h3",{staticClass:"error-color"},[e._v("确定要删除以下数据吗？")])]),r("FormItem",{attrs:{label:"删除数据"}},[r("Card",{staticStyle:{width:"350px",height:"250px","overflow-y":"scroll"}},[r("ul",e._l(e.mainTableSelectArray,function(t){return r("li",[r("a",{attrs:{href:"#"}},[e._v(e._s(t.id))])])}),0)])],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{size:"small",type:"default"},on:{click:function(t){e.batchDeleteModal.show=!1}}},[e._v("取消")]),r("Button",{attrs:{size:"small",type:"primary"},on:{click:e.batchDelete}},[e._v("确定删除")])],1)],1),r("Modal",{attrs:{"footer-hide":!0,title:e.saveModal.isUpdate?"更新":"新建",width:"500"},on:{"on-cancel":e.saveFormClose},model:{value:e.saveModal.show,callback:function(t){e.$set(e.saveModal,"show",t)},expression:"saveModal.show"}},[r("PeonyListForm",{attrs:{isUpdate:e.saveModal.isUpdate,updateData:e.saveModal.updateData},on:{"on-form-close":e.saveFormClose}})],1)],1)},[],!1,null,null,null);t.default=b.exports}}]);