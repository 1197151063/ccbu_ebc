(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-45a7e775"],{"3f5e":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var i=a("1e04"),r=a("f121").a.baseUrl.apiUrl,o={queryFileList:function(e){return Object(i.c)("/api/file/query",e)},downLoadFile:function(e){return Object(i.b)("/api/file/downLoad?id="+e)},fileUpload:function(e,t){return(void 0).fileUploadUrl},addFile:function(e){return Object(i.c)("/api/file/save",e)},fileUploadLocalUrl:r+"/api/file/localUpload/",fileUploadAliUrl:r+"/api/file/aliYunUpload/",fileUploadQiNiuUrl:r+"/api/file/qiNiuUpload/"}},"81db":function(e,t,a){"use strict";a.r(t);var i=(a("7514"),a("96cf"),a("1da1")),r=a("3f5e"),o=a("51a3"),l=a("a78e"),n=a.n(l),s=a("d1b5"),c={name:"FileList",data:function(){var e=this,t=this;return{total:null,tableLoading:!1,searchForm:{pageNum:1,pageSize:10,searchCount:!0,fileName:null,moduleType:1,fileLocationType:null},columns:[{title:"业务类型",key:"moduleType",render:function(e,a){return e("span",{},t.getModuleTypeDesc(a.row.moduleType))}},{title:"文件位置",key:"fileLocationType",render:function(e,a){return e("span",{},t.getFileLocationTypeDesc(a.row.fileLocationType))}},{title:"文件名称",key:"fileName"},{title:"上传时间",key:"createTime"},{title:"操作",key:"action",width:160,align:"center",className:"action-hide",render:function(t,a){return e.$tableAction(t,[{title:"下载",directives:[{name:"privilege",value:"file-filePage-download"}],action:function(){e.downloadFile(a.row.id)}}])}}],tableData:[]}},computed:{uploadHeader:function(){return{"x-access-token":n.a.get(s.a)}},uploadUrl:function(){var e=r.a.fileUploadLocalUrl;switch(this.searchForm.fileLocationType){case 2:e=r.a.fileUploadAliUrl;break;case 3:e=r.a.fileUploadQiNiuUrl}return e+this.searchForm.moduleType},moduleTypes:function(){var e=[];for(var t in o.b){var a={};a.desc=o.b[t].desc,a.value=o.b[t].value,e.push(a)}return e},fileLocationTypes:function(){var e=[];for(var t in o.a){var a={};a.desc=o.a[t].desc,a.value=o.a[t].value,e.push(a)}return e}},created:function(){this.getFileList()},methods:{uploadSuccess:function(){var e=Object(i.a)(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.success){e.next=3;break}return e.abrupt("return",this.uploadError());case 3:return this.$Spin.show(),a={moduleId:1,moduleType:this.searchForm.moduleType?this.searchForm.moduleType:1,fileLocationType:this.searchForm.fileLocationType?this.searchForm.fileLocationType:1,fileName:t.data.fileName,filePath:t.data.filePath},e.next=7,r.a.addFile(a);case 7:e.sent,this.$Spin.hide(),this.$Message.success("上传成功"),this.find();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),uploadError:function(e){this.$Message.error("上传出错，请重试！"),this.find()},downloadFile:function(e){r.a.downLoadFile(e)},getModuleTypeDesc:function(e){return this.$enum.getDescByValue("SERVICE_TYPE",e)},getFileLocationTypeDesc:function(e){return this.$enum.getDescByValue("FILE_TYPE",e)},reset:function(){this.searchForm.fileName=null,this.searchForm.moduleType=1,this.searchForm.fileLocationType=null,this.$refs.searchForm.resetFields(),this.find()},find:function(){this.searchForm.pageNum=1,this.searchForm.pageSize=10,this.getFileList()},changePageSize:function(e){this.searchForm.pageNum=1,this.searchForm.pageSize=e,this.getFileList()},getFileList:function(){var e=Object(i.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.tableLoading=!0,e.next=4,r.a.queryFileList(this.searchForm);case 4:t=e.sent,this.tableData=t.data.list,this.total=t.data.total,this.tableLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.tableLoading=!1;case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),changePage:function(e){this.searchForm.pageNum=e,this.getFileList()}}},u=a("2877"),p=Object(u.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticClass:"warp-card",attrs:{"dis-hover":""}},[a("Form",{ref:"searchForm",staticClass:"tools",attrs:{model:e.searchForm,inline:""}},[a("FormItem",{attrs:{prop:"fileName"}},[a("Input",{attrs:{placeholder:"请输入文件名",type:"text"},model:{value:e.searchForm.fileName,callback:function(t){e.$set(e.searchForm,"fileName",t)},expression:"searchForm.fileName"}})],1),a("FormItem",{attrs:{prop:"sendStatus"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择业务类型"},model:{value:e.searchForm.moduleType,callback:function(t){e.$set(e.searchForm,"moduleType",t)},expression:"searchForm.moduleType"}},[a("Option",{attrs:{value:""}},[e._v("全部")]),e._l(e.moduleTypes,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.desc))])})],2)],1),a("FormItem",{attrs:{prop:"sendStatus"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择文件上传位置"},model:{value:e.searchForm.fileLocationType,callback:function(t){e.$set(e.searchForm,"fileLocationType",t)},expression:"searchForm.fileLocationType"}},[a("Option",{attrs:{value:""}},[e._v("全部")]),e._l(e.fileLocationTypes,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.desc))])})],2)],1),a("FormItem",[a("ButtonGroup",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"file-filePage-query",expression:"'file-filePage-query'"}],attrs:{icon:"ios-search",type:"primary"},on:{click:e.find}},[e._v("查询")]),a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"file-filePage-query",expression:"'file-filePage-query'"}],attrs:{icon:"md-refresh",type:"default"},on:{click:e.reset}},[e._v("重置")])],1)],1),a("FormItem",{directives:[{name:"privilege",rawName:"v-privilege",value:"file-filePage-upload",expression:"'file-filePage-upload'"}]},[a("Upload",{attrs:{action:e.uploadUrl,headers:e.uploadHeader,onError:e.uploadError,onSuccess:e.uploadSuccess,showUploadList:!1}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline",type:"primary"}},[e._v("上传新文件")])],1)],1)],1),a("Table",{attrs:{columns:e.columns,data:e.tableData,loading:e.tableLoading}}),a("Page",{staticStyle:{margin:"24px 0","text-align":"right"},attrs:{current:e.searchForm.pageNum,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,30,50,100],total:e.total,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)},[],!1,null,null,null);t.default=p.exports}}]);