(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f8bc9d7a"],{"6e6f":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var i=a("1e04"),o={getPositionListPage:function(e){return Object(i.c)("/position/getListPage",e)},updatePosition:function(e){return Object(i.c)("/position/update",e)},addPosition:function(e){return Object(i.c)("/position/add",e)},deletePosition:function(e){return Object(i.a)("/position/remove/"+e)},getProjects:function(e){return Object(i.c)("/department/sysProject/query",e)}}},b63d:function(e,t,a){"use strict";a.r(t);var i=(a("96cf"),a("1da1")),o=a("6e6f"),s={name:"PositionList",components:{},props:{},data:function(){var e=this;return{isShowPage:!0,searchValue:"",isShowEditModal:!1,isShowAddModal:!1,isShowTablesLoading:!0,isShowSaveLoading:!0,isShowUpdateLoading:!0,pageTotal:0,updateItem:{id:0,positionName:"positionName",remark:""},saveItem:{positionName:"",remark:""},saveItemInt:{},columns:[{title:"id",key:"id",width:100},{title:"岗位名称",key:"positionName",width:200},{title:"岗位描述",key:"remark"},{title:"操作",key:"action",width:150,align:"center",className:"action-hide",render:function(t,a){return e.$tableAction(t,[{title:"编辑",directives:[{name:"privilege",value:"update-position"}],action:function(){e.updateItem={id:a.row.id,positionName:a.row.positionName,remark:a.row.remark},e.isShowEditModal=!0}},{title:"删除",directives:[{name:"privilege",value:"delete-position"}],action:function(){e.$Modal.confirm({title:"友情提醒",content:"确定要删除吗？",onOk:function(){e.deletePositionById(a.row.id)}})}}])}}],data:[],updateValidate:{positionName:[{required:!0,message:"请输入岗位名称",trigger:"blur"}],remark:[{required:!0,message:"请输入岗位描述",trigger:"blur"}]},saveValidate:{positionName:[{required:!0,message:"请输入岗位名称",trigger:"blur"}],remark:[{required:!0,message:"请输入岗位描述",trigger:"blur"}]},searchFrom:{positionName:"",pageNum:1,pageSize:10,searchCount:!0,sort:!1},searchFromInt:{},isShowdeleteLoading:!1}},computed:{},watch:{},filters:{},created:function(){},mounted:function(){Object.assign(this.searchFromInt,this.searchFrom),Object.assign(this.saveItemInt,this.saveItem),this.getPositionListPage()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{getPositionListPage:function(){var e=Object(i.a)(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isShowTablesLoading=!0,this.isShowPage=!0,e.next=5,o.a.getPositionListPage(this.searchFrom);case 5:t=e.sent,this.isShowTablesLoading=!1,a=t.data,this.data=a.list,this.pageTotal=a.total,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),this.isShowTablesLoading=!1;case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),changePage:function(e){this.searchFrom.pageNum=e,this.getPositionListPage()},changePageSize:function(e){this.searchFrom.pageNum=1,this.searchFrom.pageSize=e,this.getPositionListPage()},validateAndUpdataPosition:function(){var e=this;this.$refs.updateRef.validate(function(t){e.isShowUpdateLoading=!0,t?e.updatePosition():(e.isShowUpdateLoading=!1,e.$nextTick(function(){e.isShowUpdateLoading=!0}))})},updatePosition:function(){var e=Object(i.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.updatePosition(this.updateItem);case 3:return e.sent,this.$Message.success("修改成功"),e.next=7,this.getPositionListPage();case 7:this.cancelUpdateData(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),this.isShowUpdateLoading=!1,this.$nextTick(function(){t.isShowUpdateLoading=!0});case 15:return e.prev=15,this.isShowUpdateLoading=!1,e.finish(15);case 18:case"end":return e.stop()}},e,this,[[0,10,15,18]])}));return function(){return e.apply(this,arguments)}}(),cancelUpdateData:function(){this.updateItem={},this.$refs.updateRef.resetFields(),this.isShowEditModal=!1},searchData:function(){this.pageNum=1,this.getPositionListPage()},clearSearch:function(){Object.assign(this.searchFrom,this.searchFromInt),this.getPositionListPage()},validateAndAddPosition:function(){var e=this;try{this.$refs.saveRef.validate(function(t){e.isShowSaveLoading=!0,t?e.addPosition():(e.isShowSaveLoading=!1,e.$nextTick(function(){e.isShowSaveLoading=!0}))})}catch(e){}},addPosition:function(){var e=Object(i.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.addPosition(this.saveItem);case 3:return e.sent,this.$Message.success("添加成功"),this.isShowSaveLoading=!0,e.next=8,this.getPositionListPage();case 8:this.cancelSaveData(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.isShowSaveLoading=!1;case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}(),cancelSaveData:function(){Object.assign(this.saveItem,this.saveItemInt),this.$refs.saveRef.resetFields(),this.isShowAddModal=!1},deletePositionById:function(){var e=Object(i.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isShowdeleteLoading=!0,e.next=4,o.a.deletePosition(t);case 4:return e.sent,this.isShowdeleteLoading=!1,this.$Message.success("删除成功"),e.next=9,this.getPositionListPage();case 9:this.cancelSaveData(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),this.isShowdeleteLoading=!1;case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()}},n=a("2877"),r=Object(n.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticClass:"warp-card",attrs:{"dis-hover":""}},[a("Form",{staticClass:"tools",attrs:{inline:""}},[a("FormItem",[a("Input",{directives:[{name:"privilege",rawName:"v-privilege",value:"search-position",expression:"'search-position'"}],attrs:{placeholder:"请输入"},model:{value:e.searchFrom.positionName,callback:function(t){e.$set(e.searchFrom,"positionName",t)},expression:"searchFrom.positionName"}},[a("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:e.searchData},slot:"append"})],1)],1),a("FormItem",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"search-position",expression:"'search-position'"}],attrs:{icon:"md-refresh",type:"default"},on:{click:e.clearSearch}},[e._v("重置")])],1),a("FormItem",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"add-position",expression:"'add-position'"}],attrs:{icon:"md-add",type:"primary"},on:{click:function(t){e.isShowAddModal=!0}}},[e._v("添加")])],1)],1),a("Table",{ref:"tablesMain",attrs:{columns:e.columns,data:e.data,loading:e.isShowTablesLoading}}),a("Page",{staticStyle:{margin:"24px 0","text-align":"right"},attrs:{current:e.searchFrom.pageNum,"page-size":e.searchFrom.pageSize,"show-total":!0,total:e.pageTotal},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1),a("Modal",{attrs:{loading:e.isShowUpdateLoading,title:"编辑岗位"},on:{"on-cancel":e.cancelUpdateData,"on-ok":e.validateAndUpdataPosition},model:{value:e.isShowEditModal,callback:function(t){e.isShowEditModal=t},expression:"isShowEditModal"}},[a("Form",{ref:"updateRef",attrs:{"label-width":80,model:e.updateItem,rules:e.updateValidate}},[a("FormItem",{attrs:{label:"岗位名称",prop:"positionName"}},[a("Input",{attrs:{placeholder:"请输入岗位名称(必填)"},model:{value:e.updateItem.positionName,callback:function(t){e.$set(e.updateItem,"positionName",t)},expression:"updateItem.positionName"}})],1),a("FormItem",{attrs:{label:"岗位描述",prop:"remark"}},[a("Input",{attrs:{autosize:{minRows:4},maxlength:200,placeholder:"请输入岗位描述(必填)",type:"textarea"},model:{value:e.updateItem.remark,callback:function(t){e.$set(e.updateItem,"remark",t)},expression:"updateItem.remark "}})],1)],1)],1),a("Modal",{attrs:{loading:e.isShowSaveLoading,title:"添加岗位"},on:{"on-cancel":e.cancelSaveData,"on-ok":e.validateAndAddPosition},model:{value:e.isShowAddModal,callback:function(t){e.isShowAddModal=t},expression:"isShowAddModal"}},[a("Form",{ref:"saveRef",attrs:{"label-width":80,model:e.saveItem,rules:e.saveValidate}},[a("FormItem",{attrs:{label:"岗位名称",prop:"positionName"}},[a("Input",{attrs:{maxlength:30,placeholder:"请输入岗位名称(必填)"},model:{value:e.saveItem.positionName,callback:function(t){e.$set(e.saveItem,"positionName",t)},expression:"saveItem.positionName"}})],1),a("FormItem",{attrs:{label:"岗位描述",prop:"remark"}},[a("Input",{attrs:{autosize:{minRows:4},maxlength:200,placeholder:"请输入岗位描述(必填)",type:"textarea"},model:{value:e.saveItem.remark,callback:function(t){e.$set(e.saveItem,"remark",t)},expression:"saveItem.remark "}})],1)],1)],1)],1)},[],!1,null,"6199934e",null);t.default=r.exports}}]);