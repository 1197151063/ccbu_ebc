(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cdf33124"],{"004e":function(e,t,a){},"0e8f":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("1e04"),n={getLoadDepartment:function(){return Object(r.a)("/department/list")},getDepartmentEmployeeList:function(){return Object(r.a)("/department/listEmployee")},addDepartment:function(e){return Object(r.c)("/department/add",e)},updateDepartment:function(e){return Object(r.c)("/department/update",e)},deleteDepartment:function(e){return Object(r.c)("/department/delete/"+e)},getDepartmentById:function(e){return Object(r.a)("/department/query/"+e)},getDepartmentAll:function(){return Object(r.a)("/department/listAll")},getListEmployeeByDepartmentName:function(e){return Object(r.a)("/department/listEmployeeByDepartmentName?departmentName="+e)},upOrDown:function(e,t){return Object(r.a)("/department/upOrDown/"+e+"/"+t)},upGrade:function(e){return Object(r.a)("/department/upgrade/"+e)},downGrade:function(e,t){return Object(r.a)("/department/downgrade/"+e+"/"+t)},getProjects:function(e){return Object(r.c)("/department/sysProject/query",e)}}},"2c69":function(e,t,a){"use strict";var r=a("004e");a.n(r).a},"3b2b":function(e,t,a){var r=a("7726"),n=a("5dbc"),i=a("86cc").f,o=a("9093").f,s=a("aae3"),l=a("0bfb"),c=r.RegExp,d=c,p=c.prototype,m=/a/g,u=/a/g,f=new c(m)!==m;if(a("9e1e")&&(!f||a("79e5")(function(){return u[a("2b4c")("match")]=!1,c(m)!=m||c(u)==u||"/a/i"!=c(m,"i")}))){c=function(e,t){var a=this instanceof c,r=s(e),i=void 0===t;return!a&&r&&e.constructor===c&&i?e:n(f?new d(r&&!i?e.source:e,t):d((r=e instanceof c)?e.source:e,r&&i?l.call(e):t),a?this:p,c)};for(var h=function(e){e in c||i(c,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},g=o(d),y=0;g.length>y;)h(g[y++]);p.constructor=c,c.prototype=p,a("2aba")(r,"RegExp",c)}a("7a56")("RegExp")},"6e6f":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("1e04"),n={getPositionListPage:function(e){return Object(r.c)("/position/getListPage",e)},updatePosition:function(e){return Object(r.c)("/position/update",e)},addPosition:function(e){return Object(r.c)("/position/add",e)},deletePosition:function(e){return Object(r.a)("/position/remove/"+e)},getProjects:function(e){return Object(r.c)("/department/sysProject/query",e)}}},"75b3":function(e,t,a){"use strict";var r=a("fcb9");a.n(r).a},"79b8":function(e,t,a){},b5fc:function(e,t,a){"use strict";var r=(a("7f7f"),a("96cf"),a("1da1")),n=(a("ac6a"),a("0e8f")),i={name:"DepartmentEmployeeTreeItem",components:{},props:{itemData:{type:Object,required:!0},isDepartment:{type:Boolean,default:!1}},data:function(){return{currentStyle:{backgroundColor:"#FFF",color:"#495060",padding:"3px 8px"},hoverStyle:{backgroundColor:"#2d8cf0",color:"#FFF",padding:"3px 8px"},selectStyle:{backgroundColor:"#2d8cf0",color:"#FFF",padding:"3px 8px"},style:{backgroundColor:"#FFF",color:"#495060",padding:"3px 8px"}}},computed:{},watch:{},filters:{},created:function(){this.itemData.eventbus&&this.itemData.eventbus.$on("select",this.listenSelect)},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){this.itemData.eventbus&&this.itemData.eventbus.$off("select",this.listenSelect)},destroyed:function(){},activated:function(){},methods:{selectItem:function(){(!this.isDepartment&&this.itemData.isEmployee||this.isDepartment)&&this.itemData.selectFunction&&this.itemData.selectFunction({id:this.itemData.id,name:this.itemData.title})},listenSelect:function(e){e.id===this.itemData.id?this.itemData.selected=!0:(this.currentStyle=this.style,this.itemData.selected=!1)},onMouseover:function(){null!==this.itemData.selected&&this.itemData.selected||(this.currentStyle=this.hoverStyle)},onMouseout:function(){null!==this.itemData.selected&&this.itemData.selected||(this.currentStyle=this.style)}}},o=a("2877"),s=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticStyle:{display:"inline-block"},on:{click:e.selectItem}},[a("span",{style:e.itemData.selected?e.selectStyle:e.currentStyle,on:{mouseout:e.onMouseout,mouseover:e.onMouseover}},[a("Icon",{staticStyle:{"margin-right":"8px"},attrs:{type:e.itemData.icon}}),e._v("\n    "+e._s(e.itemData.title)+"\n  ")],1)])},[],!1,null,"6fb6b91c",null).exports,l=a("2b0e"),c={name:"DepartmentEmployeeTree",components:{DepartmentEmployeeTreeItem:s},props:{isDepartment:{type:Boolean,default:!1}},data:function(){return{originalData:[],searchKeywords:"",eventbus:new l.default,currentSelect:null,treeData:[]}},computed:{},watch:{},filters:{},created:function(){},mounted:function(){this.getDepartmentEmployeeList()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{resetSearch:function(){this.searchKeywords="",this.getDepartmentEmployeeList()},getSelect:function(){return this.currentSelect},filterEmployee:function(){var e=this;this.originalData.forEach(function(t){e.recursionFilterEmployee(t)}),this.generateTreeData()},recursionFilterEmployee:function(e){var t=this;e.employees&&e.employees.forEach(function(e){""===t.searchKeywords||e.actualName.indexOf(t.searchKeywords)>-1?e.show=!0:e.show=!1}),e.children&&e.children.forEach(function(e){t.recursionFilterEmployee(e)})},filterDepartment:function(){var e=this;this.originalData.forEach(function(t){e.recursionFilterDepartment(t)}),this.generateTreeData()},recursionFilterDepartment:function(e){var t=this;e.children&&e.children.forEach(function(e){e.show=!0,t.recursionFilterDepartment(e)})},getDepartmentEmployeeList:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,n.a.getDepartmentEmployeeList();case 3:t=e.sent,this.$Spin.hide(),this.originalData=t.data,this.isDepartment?this.filterDepartment():this.filterEmployee();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),generateTreeData:function(){var e=this,t=[];this.originalData.forEach(function(a){var r=1==a.type?"md-cube":"md-menu",n=Object.assign({},{title:a.name,expand:!0,children:e.constractTree(a),render:function(t,n){return n.root,n.node,n.data,t(s,{props:{isDepartment:e.isDepartment,itemData:{title:a.name,icon:r,isEmployee:!1,id:a.id,selectFunction:function(t){e.isDepartment&&(e.currentSelect=t,e.eventbus.$emit("select",t),e.$emit("on-select",t))}}},style:{cursor:"pointer"}})}});t.push(n)}),this.treeData=t},constractTree:function(e){var t=this,a=[];return e.children&&e.children.forEach(function(e){if(!t.isDepartment||e.show){var r=1==e.type?"md-cube":"md-menu",n=Object.assign({},{title:e.name,expand:!0,disabled:!1,children:t.constractTree(e),render:function(a,n){return n.root,n.node,n.data,a(s,{props:{isDepartment:t.isDepartment,itemData:{title:e.name,icon:r,isEmployee:!1,id:e.id,selectFunction:function(e){t.currentSelect=e,t.eventbus.$emit("select",e),t.$emit("on-select",e)}}},style:{cursor:"pointer"}})}});a.push(n)}}),!this.isDepartment&&e.employees&&e.employees.forEach(function(e){if(e.show){var r=Object.assign({},{title:e.actualName,render:function(a,r){return r.root,r.node,r.data,a(s,{props:{isDepartment:t.isDepartment,itemData:{title:e.actualName,icon:"md-person",isEmployee:!0,selected:!1,id:e.id,eventbus:t.eventbus,selectFunction:function(e){t.currentSelect=e,t.eventbus.$emit("select",e),t.$emit("on-select",e)}}},style:{cursor:"pointer"}})}});a.push(r)}}),a}}},d=Object(o.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"330px"}},[a("Row",[a("Col",{attrs:{span:"24"}},[e.isDepartment?e._e():a("Input",{staticStyle:{"max-width":"300px",position:"fixed","z-index":"9999"},attrs:{placeholder:"请输入员工名称"},on:{"on-change":e.filterEmployee},model:{value:e.searchKeywords,callback:function(t){e.searchKeywords=t},expression:"searchKeywords"}}),a("Tree",{staticStyle:{"margin-top":"40px"},attrs:{data:e.treeData}})],1)],1)],1)},[],!1,null,"07571098",null);t.a=d.exports},cc5e:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("1e04"),n={addRole:function(e,t){var a={remark:e,roleName:t};return Object(r.c)("/role/add",a)},deleteRole:function(e){return Object(r.a)("/role/delete/"+e)},updateRole:function(e,t,a){var n={id:e,remark:t,roleName:a};return Object(r.c)("/role/update",n)},getRoleDetail:function(e){return Object(r.a)("/role/get/"+e)},getAllRole:function(){return Object(r.a)("role/getAll")},getListEmployee:function(e){return Object(r.c)("/role/listEmployee",e)},getAllListEmployee:function(e){return Object(r.a)("/role/listAllEmployee/"+e)},deleteEmployeeRole:function(e){return Object(r.a)("/role/removeEmployee?employeeId="+e.employeeId+"&roleId="+e.roleId)},deleteEmployeeList:function(e){return Object(r.c)("/role/removeEmployeeList",e)},addEmployeeListRole:function(e){return Object(r.c)("/role/addEmployeeList",e)},getRoles:function(e){return Object(r.a)("/role/getRoles/"+e)}}},ea5d:function(e,t,a){"use strict";var r=a("79b8");a.n(r).a},ee62:function(e,t,a){"use strict";a.r(t);var r=(a("96cf"),a("1da1")),n=(a("ac6a"),a("456d"),a("7f7f"),a("1157")),i=a.n(n),o=a("0e8f"),s=a("ef75"),l=a("cc5e"),c=a("f1ed"),d=(a("3b2b"),a("6e6f")),p=a("b5fc"),m={name:"EmployeeTableAdd",components:{DepartmentEmployeeTree:p.a},props:{selectDepartment:{type:Object,required:!0}},data:function(){var e=this;return{isShowAddOrUpdateEmployeeModal:!1,isShowLoading:!1,roleList:[],positionListData:[],isShowTree:!1,formValidateBackup:{},formValidate:{actualName:"",loginName:"",nickName:"",departmentName:"",departmentId:"",isDisabled:0,phone:"",idCard:"",birthday:"",loginPwd:"",passwordAgain:"",email:"",positionIdList:[]},ruleValidate:{loginName:[{required:!0,message:"登录名不能为空",trigger:"blur"}],actualName:[{required:!0,message:"姓名不能为空",trigger:"blur"}],idCard:[{required:!1,message:"身份证不能为空",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"身份证格式错误",trigger:"blur"}],email:[{required:!1,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"请输入正确邮箱格式",trigger:"blur"}],departmentName:[{required:!0,message:"部门不能为空",trigger:"blur"},{required:!0,message:"部门不能为空",trigger:"change"}],positionIdList:[{required:!0,type:"array",min:1,message:"岗位不能为空",trigger:"change"}],birthday:[{required:!1,message:"请选择出生日期",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^(13|14|15|16|17|18)\d{9}$/,message:"手机号格式错误",trigger:"blur"}],loginPwd:[{required:!0,message:"密码不能为空",trigger:"blur"}],passwordAgain:[{required:!0,message:"确认密码不能为空",trigger:"blur"}]},birthDate:{shortcuts:[{text:"今天",value:function(){return new Date},onClick:function(t){e.$Message.info("你选择的是今天")}},{text:"昨天",value:function(){var e=new Date;return e.setTime(e.getTime()-864e5),e},onClick:function(t){e.$Message.info("你选择的是昨天")}},{text:"一周前",value:function(){var e=new Date;return e.setTime(e.getTime()-6048e5),e},onClick:function(t){e.$Message.info("你选择的是一周前")}}]}}},computed:{},watch:{isShowAddOrUpdateEmployeeModal:function(e){e&&this.getPositionListPage()}},filters:{},created:function(){},mounted:function(){var e=c.f.getDateStr(0,c.a.YMDHM);this.formValidate.createDate=e,Object.assign(this.formValidateBackup,this.formValidate),this.getAllRole()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{clickOutside:function(){this.isShowTree&&(this.isShowTree=!1)},selectDepartmentOrEmployee:function(e){this.$set(this.formValidate,"departmentId",e.id),this.$set(this.formValidate,"departmentName",e.name),this.isShowTree=!1,i()(".department-wrap").hide()},onChangeVisibleModal:function(e){e||(this.formValidate=Object.assign({},this.formValidateBackup))},showModal:function(e){if(void 0===e?(this.ruleValidate.loginPwd=[{required:!0,message:"密码长度至少为6位，不允许输入空格",trigger:"blur",min:6},{pattern:/^[0-9]{6,10}$/,message:"密码格式错误",trigger:"blur"}],this.ruleValidate.passwordAgain=[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:this.loginPwd,trigger:"blur"},{pattern:/^[0-9]{6,10}$/,message:"确认密码格式错误",trigger:"blur"}],this.ruleValidate.loginName=[{required:!0,message:"登录名不能为空",trigger:"blur"},{pattern:/^[A-Za-z]+[A-Za-z0-9]{5,17}$/,message:"请输入6位或6位字符以上(英文+数字)，第一个字符必须为英文字母",trigger:"blur"}]):(delete this.ruleValidate.loginPwd,delete this.ruleValidate.passwordAgain,this.ruleValidate.loginName=[{required:!0,message:"登录名不能为空",trigger:"blur"}]),this.$refs.formValidate.resetFields(),e&&Object.keys(e).length>0){var t=[];e.positionRelationList=e.positionRelationList||[],e.positionRelationList.map(function(e){t.push(e.positionId)}),e.positionIdList=t,this.formValidate=Object.assign({},e)}else Object.keys(this.selectDepartment).length>0&&(1===this.selectDepartment.type?(this.formValidate.departmentId=null,this.formValidate.departmentName=null,this.formValidate.organizationId=this.selectDepartment.id,this.formValidate.organizationName=this.selectDepartment.name):(this.formValidate.departmentId=this.selectDepartment.id,this.formValidate.departmentName=this.selectDepartment.name,this.formValidate.organizationId=this.selectDepartment.organizationId,this.formValidate.organizationName=this.selectDepartment.organizationName));this.isShowAddOrUpdateEmployeeModal=!0},submitFormData:function(){var e=this;this.$refs.formValidate.validate(function(t){if(/^[A-Za-z]+[A-Za-z0-9]{5,17}$/.test(e.formValidate.loginName)||e.formValidate.id)if(!e.formValidate.idCard||/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e.formValidate.idCard)){if(new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]").test(e.formValidate.actualName))return e.$Message.error("姓名中不能含有特殊字符！"),!1;e.formValidate.passwordAgain===e.formValidate.loginPwd?t&&(e.formValidate.id?e.updateEmployee(e.formValidate):e.addEmployee(e.formValidate)):e.$Message.error("两次输入密码不一致，请重新输入！！")}else e.$Message.error("身份证号码格式不正确！");else e.$Message.error("登录名格式不正确！")})},updateEmployee:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isShowLoading=!0,e.next=4,s.a.updateEmployee(t);case 4:e.sent,this.isShowAddOrUpdateEmployeeModal=!1,this.$Message.success("修改成员成功"),this.$emit("addSuccess"),this.$refs.formValidate.resetFields(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:return e.prev=14,this.isShowLoading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[0,11,14,17]])}));return function(t){return e.apply(this,arguments)}}(),addEmployee:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isShowLoading=!0,e.next=4,s.a.addEmployee(t);case 4:e.sent,this.isShowAddOrUpdateEmployeeModal=!1,this.$Message.success("添加成员成功"),this.$emit("addSuccess"),this.$refs.formValidate.resetFields(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:return e.prev=14,this.isShowLoading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[0,11,14,17]])}));return function(t){return e.apply(this,arguments)}}(),getAllRole:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.getAllRole();case 2:t=e.sent,this.roleList=t.data;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getPositionListPage:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getPositionListPage({pageNum:1,pageSize:200,sort:!1});case 2:t=e.sent,a=t.data,r=[],a.list.map(function(e){r.push({value:e.id,label:e.positionName})}),this.positionListData=r;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),changeIdCard:function(e){if(/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e)){var t=e.slice(6,14),a=t.slice(0,4),r=t.slice(4,6),n=t.slice(6,8);this.formValidate.birthday=a+"-"+r+"-"+n}}}},u=(a("75b3"),a("2877")),f={name:"EmployeeTableDetail",components:{},props:{},data:function(){return{isShowDetailModal:!1,detail:{}}},computed:{},watch:{},filters:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{showModal:function(e){this.isShowDetailModal=!0,this.detail=e}}},h={name:"EmployeeTable",components:{EmployeeTableAdd:Object(u.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal",{style:{top:"20px"},attrs:{title:e.formValidate.id?"编辑成员":"添加成员",width:"740"},on:{"on-visible-change":e.onChangeVisibleModal},model:{value:e.isShowAddOrUpdateEmployeeModal,callback:function(t){e.isShowAddOrUpdateEmployeeModal=t},expression:"isShowAddOrUpdateEmployeeModal"}},[a("div",[a("Form",{ref:"formValidate",attrs:{"label-width":100,model:e.formValidate,rules:e.ruleValidate}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"登录名",prop:"loginName"}},[a("Input",{staticClass:"form-width",attrs:{disabled:null!=e.formValidate.id,maxlength:30,placeholder:"请输入登录名"},on:{"on-keydown":function(t){e.formValidate.loginName=e.formValidate.loginName.replace(/^ +| +$/g,"")},"on-keyup":function(t){e.formValidate.loginName=e.formValidate.loginName.replace(/^ +| +$/g,"")}},model:{value:e.formValidate.loginName,callback:function(t){e.$set(e.formValidate,"loginName",t)},expression:"formValidate.loginName"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"姓名",prop:"actualName"}},[a("Input",{staticClass:"form-width",attrs:{maxlength:30,placeholder:"请输入姓名"},on:{"on-keydown":function(t){e.formValidate.actualName=e.formValidate.actualName.replace(/^ +| +$/g,"")},"on-keyup":function(t){e.formValidate.actualName=e.formValidate.actualName.replace(/^ +| +$/g,"")}},model:{value:e.formValidate.actualName,callback:function(t){e.$set(e.formValidate,"actualName",t)},expression:"formValidate.actualName"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"别名"}},[a("Input",{staticClass:"form-width",attrs:{maxlength:30,placeholder:"请输入别名"},on:{"on-keyup":function(t){e.formValidate.nickName=e.formValidate.nickName.replace(/^ +| +$/g,"")}},model:{value:e.formValidate.nickName,callback:function(t){e.$set(e.formValidate,"nickName",t)},expression:"formValidate.nickName"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"身份证"}},[a("Input",{staticClass:"form-width",attrs:{placeholder:"请输入身份证信息"},on:{"on-blur":function(t){return e.changeIdCard(e.formValidate.idCard)},"on-keyup":function(t){e.formValidate.idCard=e.formValidate.idCard.replace(/^ +| +$/g,"")}},model:{value:e.formValidate.idCard,callback:function(t){e.$set(e.formValidate,"idCard",t)},expression:"formValidate.idCard"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"手机",prop:"phone"}},[a("Input",{staticClass:"form-width",attrs:{placeholder:"请输入手机号"},on:{"on-keyup":function(t){e.formValidate.phone=e.formValidate.phone.replace(/^ +| +$/g,"")}},model:{value:e.formValidate.phone,callback:function(t){e.$set(e.formValidate,"phone",t)},expression:"formValidate.phone"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"E-mail",prop:"email"}},[a("Input",{staticClass:"form-width",attrs:{placeholder:"请输入邮箱地址",type:"email"},model:{value:e.formValidate.email,callback:function(t){e.$set(e.formValidate,"email",t)},expression:"formValidate.email"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.clickOutside,expression:"clickOutside"}],staticClass:"select-class",attrs:{label:"团队",prop:"departmentName"}},[a("Input",{staticClass:"form-width",attrs:{placeholder:"请选择团队",readonly:""},nativeOn:{click:function(t){e.isShowTree=!e.isShowTree}},model:{value:e.formValidate.departmentName,callback:function(t){e.$set(e.formValidate,"departmentName",t)},expression:"formValidate.departmentName"}},[e.isShowTree?a("Icon",{attrs:{slot:"suffix",type:"ios-arrow-up"},slot:"suffix"}):a("Icon",{attrs:{slot:"suffix",type:"ios-arrow-down"},slot:"suffix"})],1),e.isShowTree?a("div",{staticClass:"department-wrap"},[a("DepartmentEmployeeTree",{ref:"departmentEmployeeTree",attrs:{isDepartment:!0},on:{"on-select":e.selectDepartmentOrEmployee}})],1):e._e()],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"状态",required:""}},[a("RadioGroup",{model:{value:e.formValidate.isDisabled,callback:function(t){e.$set(e.formValidate,"isDisabled",t)},expression:"formValidate.isDisabled"}},[a("Radio",{attrs:{label:0}},[e._v("启用")]),a("Radio",{attrs:{label:1}},[e._v("禁用")])],1)],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{staticClass:"select-class",attrs:{label:"岗位",prop:"positionIdList"}},[a("Select",{staticClass:"form-width",attrs:{multiple:""},model:{value:e.formValidate.positionIdList,callback:function(t){e.$set(e.formValidate,"positionIdList",t)},expression:"formValidate.positionIdList"}},e._l(e.positionListData,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),a("Col",{attrs:{span:"12"}},[e.formValidate.id?e._e():a("FormItem",{attrs:{label:"密码",prop:"loginPwd"}},[a("Input",{staticClass:"form-width",attrs:{placeholder:"请输入密码",type:"password"},on:{"on-keydown":function(t){e.formValidate.loginPwd=e.formValidate.loginPwd.replace(/^ +| +$/g,"")},"on-keyup":function(t){e.formValidate.loginPwd=e.formValidate.loginPwd.replace(/^ +| +$/g,"")}},model:{value:e.formValidate.loginPwd,callback:function(t){e.$set(e.formValidate,"loginPwd",t)},expression:"formValidate.loginPwd"}})],1)],1),a("Col",{attrs:{span:"12"}},[e.formValidate.id?e._e():a("FormItem",{attrs:{label:"密码确认",prop:"passwordAgain"}},[a("Input",{staticClass:"form-width",attrs:{placeholder:"请输入确认密码",type:"password"},on:{"on-keydown":function(t){e.formValidate.passwordAgain=e.formValidate.passwordAgain.replace(/^ +| +$/g,"")},"on-keyup":function(t){e.formValidate.passwordAgain=e.formValidate.passwordAgain.replace(/^ +| +$/g,"")}},model:{value:e.formValidate.passwordAgain,callback:function(t){e.$set(e.formValidate,"passwordAgain",t)},expression:"formValidate.passwordAgain"}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(t){e.isShowAddOrUpdateEmployeeModal=!1}}},[e._v("取消")]),a("Button",{staticClass:"newBtn",attrs:{loading:e.isShowLoading,type:"primary"},on:{click:e.submitFormData}},[e._v("提交")])],1)])],1)},[],!1,null,"5a786a0b",null).exports,EmployeeTableDetail:Object(u.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{"footer-hide":!0,width:700,title:"职员详情"},model:{value:e.isShowDetailModal,callback:function(t){e.isShowDetailModal=t},expression:"isShowDetailModal"}},[a("Form",{attrs:{"label-width":80}},[a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"姓名:"}},[e._v(e._s(e.detail.actualName))])],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"登录名:"}},[e._v(e._s(e.detail.loginName))])],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"别名:"}},[e._v(e._s(e.detail.nickName))])],1)],1),a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"团队:"}},[e._v(e._s(e.detail.departmentName))])],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"手机:"}},[e._v(e._s(e.detail.phone))])],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"身份证:"}},[e._v(e._s(e.detail.idCard))])],1)],1),a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"出生日期:"}},[e._v(e._s(e.detail.birthday))])],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"电子邮箱:"}},[e._v(e._s(e.detail.email))])],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"状态:"}},[e._v(e._s(e.detail.isDisabled?"禁用":"启用"))])],1)],1)],1)],1)},[],!1,null,"1b6b6134",null).exports},props:{selectDepartment:{type:Object,required:!0},departments:{type:Array,required:!0}},data:function(){var e=this;return{employeeRole:[],mid:"",totalPage:0,pageSize:20,pageNum:1,isShowManageRoleModal:!1,isShowTablesLoading:!1,searchEmployeeName:"",columns:[{type:"selection",width:60,align:"center"},{title:"ID",width:60,key:"id"},{key:"actualName",width:200,title:"名称",align:"left"},{key:"loginName",title:"登录名",width:200,align:"left"},{key:"isDisabled",width:80,title:"状态",align:"left",render:function(e,t){return e("span",t.row.isDisabled?"禁用":"启用")}},{key:"phone",width:120,title:"手机",align:"left"},{key:"departmentName",width:180,title:"所属部门",align:"left"},{key:"positionName",width:180,title:"岗位",align:"left",ellipsis:!0,tooltip:!0},{key:"email",width:180,title:"电子邮箱",align:"left"},{key:"createTime",width:180,title:"创建时间",align:"left"},{title:"操作",key:"action",width:160,fixed:"right",align:"center",className:"action-hide",render:function(t,a){var r,n=[],i=a.row.super;return i||n.push({title:"角色设置",directives:[{name:"privilege",value:"update-employee-role"}],action:function(){e.showManageRoleModal(t,a)}}),n.push({title:"详情",action:function(){e.$refs.employeeTableDetail.showModal(a.row)}}),0!=a.row.isDisabled||i||n.push({title:"编辑",directives:[{name:"privilege",value:"update-employee"}],action:function(){e.updataEmployee(a.row)}}),i||(r=0==a.row.isDisabled?{title:"禁用",directives:[{name:"privilege",value:"disabled-employee"}],action:function(){e.updateEmployeeStatus(t,a)}}:{title:"启用",directives:[{name:"privilege",value:"disabled-employee"}],action:function(){e.updateEmployeeStatus(t,a)}},n.push(r)),i||n.push({title:"密码重置",directives:[{name:"privilege",value:"reset-employee-password"}],action:function(){e.$Modal.confirm({title:"重置密码",content:"是否将密码重置为123456",onOk:function(){e.resetPassword(a.row.id)}})}}),1!=a.row.isDisabled||i||n.push({title:"删除",directives:[{name:"privilege",value:"delete-employee"}],action:function(){e.$Modal.confirm({title:"删除",content:"确认删除？",onOk:function(){e.deleteEmployee(a.row.id)}})}}),e.$tableAction(t,n)}}],employeeTable:[],disableId:[],currentDisabled:0,roleList:[]}},computed:{},watch:{selectDepartment:function(e){this.selectDepartment=e,this.pageNum=1,this.getEmployeeList()}},filters:{},created:function(){},mounted:function(){this.getEmployeeList()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{changePage:function(e){this.pageNum=e,this.getEmployeeList()},getEmployeeList:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t={isDisabled:this.currentDisabled,pageSize:this.pageSize,pageNum:this.pageNum}).departmentId=this.selectDepartment.id,e.prev=2,this.isShowTablesLoading=!0,t.keyword=this.searchEmployeeName,e.next=7,s.a.getEmployeeList(t);case 7:a=e.sent,this.totalPage=a.data.total,this.employeeTable=a.data.list,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2);case 15:return e.prev=15,this.isShowTablesLoading=!1,e.finish(15);case 18:case"end":return e.stop()}},e,this,[[2,12,15,18]])}));return function(){return e.apply(this,arguments)}}(),showAddEmployeeModal:function(){this.$refs.employeeTableAdd.showModal()},queryEmployeeListByIsDisabled:function(e){this.currentDisabled=e,this.pageNum=1,this.getEmployeeList()},confirmAddRole:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.employeeRole,e.prev=1,this.isShowTablesLoading=!0,e.next=5,s.a.updateRoles(Object.assign({employeeId:this.mid,roleIds:t}));case 5:e.sent,this.isShowTablesLoading=!1,this.$Message.success("授权成功"),this.getEmployeeList(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),this.isShowTablesLoading=!1;case 15:case"end":return e.stop()}},e,this,[[1,11]])}));return function(){return e.apply(this,arguments)}}(),getRoles:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){var a,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isShowTablesLoading=!0,e.next=4,l.a.getRoles(t);case 4:a=e.sent,this.isShowTablesLoading=!1,this.roleList=a.data,this.employeeRole=[],this.roleList.forEach(function(e){e.selected&&r.employeeRole.push(e.id)}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.isShowTablesLoading=!1;case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),showManageRoleModal:function(e,t){this.mid=t.row.id,this.isShowManageRoleModal=!0,this.getRoles(t.row.id)},updataEmployee:function(e){this.departments[0].id==e.departmentId?e.departmentName=this.departments[0].name:this.departments[0].children.forEach(function(t){t.id==e.departmentId&&(e.departmentName=t.name)}),e.birthday&&(e.birthday=c.f.getDate(new Date(e.birthday),"YMD")),this.$refs.employeeTableAdd.showModal(e)},searchEmployees:function(){this.pageNum=1,this.queryEmployeeListByIsDisabled(0)},singleSelect:function(e){this.disableId=e},GroupDisable:function(e){if(0==this.disableId.length)return this.$Message.error("请最少选择一项"),!1;this.currentDisabled=e;var t=this.disableId.map(function(e){return e.id});this.updateStatusBatch(Object.assign({status:e,employeeIds:t}))},updateEmployeeStatus:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,a){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isShowTablesLoading=!0,r=a.row.id,n=0,0==a.row.isDisabled?(n=1,this.queryEmployeeListByIsDisabled(0)):(n=0,this.queryEmployeeListByIsDisabled(1)),e.next=7,s.a.updateStatus(r,n);case 7:e.sent,this.isShowTablesLoading=!1,n?(this.$Message.success("禁用成功"),this.getEmployeeList()):(this.$Message.success("启用成功"),this.queryEmployeeListByIsDisabled(1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),this.isShowTablesLoading=!1;case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t,a){return e.apply(this,arguments)}}(),updateStatusBatch:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isShowTablesLoading=!0,e.next=4,s.a.updateStatusBatch(t);case 4:e.sent,this.isShowTablesLoading=!1,this.$Message.success("操作成功"),this.disableId=[],this.queryEmployeeListByIsDisabled(this.currentDisabled),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.isShowTablesLoading=!1;case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),resetPassword:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isShowTablesLoading=!0,e.next=4,s.a.resetPassword(t);case 4:e.sent,this.isShowTablesLoading=!1,this.$Message.success("操作成功"),this.queryEmployeeListByIsDisabled(this.currentDisabled),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.isShowTablesLoading=!1;case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),deleteEmployee:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isShowTablesLoading=!0,e.next=4,s.a.deleteEmployee(t);case 4:e.sent,this.isShowTablesLoading=!1,this.$Message.success("操作成功"),this.queryEmployeeListByIsDisabled(this.currentDisabled),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.isShowTablesLoading=!1;case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()}},g={name:"RoleEmployeeManage",components:{EmployeeTable:(a("ea5d"),Object(u.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Col",{attrs:{lg:19,md:16}},[a("Card",{staticClass:"warp-card",attrs:{"dis-hover":""}},[a("Row",{attrs:{justify:"space-between",type:"flex"}},[a("Col",[a("Input",{staticStyle:{width:"200px"},attrs:{icon:"md-search",placeholder:"请输入姓名搜搜..."},on:{"on-change":e.searchEmployees},model:{value:e.searchEmployeeName,callback:function(t){e.searchEmployeeName=t},expression:"searchEmployeeName"}}),a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"add-employee",expression:"'add-employee'"}],staticStyle:{"margin-left":"5px"},attrs:{icon:"md-add",type:"primary"},on:{click:e.showAddEmployeeModal}},[e._v("添加成员")])],1),a("Col",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"search-department",expression:"'search-department'"},{name:"show",rawName:"v-show",value:!e.currentDisabled,expression:"!currentDisabled"}],attrs:{type:"default"},on:{click:function(t){return e.queryEmployeeListByIsDisabled(1)}}},[e._v("查看已禁用用户")]),a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"search-department",expression:"'search-department'"},{name:"show",rawName:"v-show",value:e.currentDisabled,expression:"currentDisabled"}],attrs:{type:"default"},on:{click:function(t){return e.queryEmployeeListByIsDisabled(0)}}},[e._v("查看已启用用户")]),a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"disabled-employee-batch",expression:"'disabled-employee-batch'"},{name:"show",rawName:"v-show",value:!e.currentDisabled,expression:"!currentDisabled"}],staticStyle:{"margin-left":"5px"},attrs:{type:"error"},on:{click:function(t){return e.GroupDisable(1)}}},[e._v("批量禁用")]),a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"disabled-employee-batch",expression:"'disabled-employee-batch'"},{name:"show",rawName:"v-show",value:e.currentDisabled,expression:"currentDisabled"}],staticStyle:{"margin-left":"5px"},attrs:{type:"success"},on:{click:function(t){return e.GroupDisable(0)}}},[e._v("批量启用")])],1)],1),a("Row",{staticStyle:{"padding-top":"10px"}},[a("Table",{attrs:{columns:e.columns,data:e.employeeTable,loading:e.isShowTablesLoading,border:""},on:{"on-selection-change":e.singleSelect}})],1),a("Row",{staticClass:"page",staticStyle:{position:"relative","margin-top":"10px"},attrs:{justify:"end",type:"flex"}},[a("Page",{attrs:{current:e.pageNum,"page-size":e.pageSize,total:e.totalPage,"show-elevator":""},on:{"on-change":e.changePage}})],1)],1),a("EmployeeTableAdd",{ref:"employeeTableAdd",attrs:{selectDepartment:e.selectDepartment},on:{addSuccess:e.getEmployeeList}}),a("Modal",{attrs:{"class-name":"vertical-center-modal",title:"角色管理"},on:{"on-ok":e.confirmAddRole},model:{value:e.isShowManageRoleModal,callback:function(t){e.isShowManageRoleModal=t},expression:"isShowManageRoleModal"}},[a("CheckboxGroup",{model:{value:e.employeeRole,callback:function(t){e.employeeRole=t},expression:"employeeRole"}},e._l(e.roleList,function(t){return a("Checkbox",{key:t.id,staticStyle:{width:"104px","line-height":"40px"},attrs:{label:t.id}},[e._v(e._s(t.roleName))])}),1)],1),a("EmployeeTableDetail",{ref:"employeeTableDetail"})],1)},[],!1,null,"b75bbab6",null)).exports,DepartmentEmployeeTree:p.a},props:{},data:function(){var e=this;return{departmentName:"",isShowTree:!1,projectData:[],selectDepartment:{},isShowOperationModal:!1,isShowDeleteModal:!1,departmentParam:{id:"",name:"",managerId:null,managerName:"",parentName:"",parentId:"",projectId:"",projectName:"",type:1},selectEmployeeId:null,departmentParamBackup:{},isShowCompanySettingModal:!1,departmentGroup:[{name:"",expand:!0,render:function(t,a){var r=a.root,n=a.node,i=a.data,o=i.name;return o.length>8&&(o=i.name.substring(0,8)+"..."),i&&0!==Object.keys(i).length&&i.id?t("Tooltip",{props:{placement:"right"},style:{fontSize:"12px"}},[t("span",{style:{display:"inline-block"}},[t("span",[t("div",{props:{},style:{fontSize:"12px"}},[t("Icon",{props:{type:"md-cube"},style:{marginRight:"8px"}}),t("Button",{props:Object.assign({}),class:["departmentSelect"],style:{border:"none",background:"#ffffff",padding:"4px 5px"},on:{click:function(t){e.loadEmployeeTable(t,r,n,i)}}},o)])])]),t("div",{slot:"content"},[t("a",{props:{},style:{color:"#fff",margin:"0 5px 5px"},directives:[{name:"privilege",value:"addDepartment"}],on:{click:function(){e.addOrUpdataDepartment(i,!1)}}},"添加")]),t("div",{slot:"content"},[t("a",{props:{},style:{color:"#fff",margin:"0 5px 5px"},directives:[{name:"privilege",value:"update-department"}],on:{click:function(){i.parentId=0,e.addOrUpdataDepartment(i,!0)}}},"编辑")])]):t("span","")},children:[]}]}},computed:{},watch:{},filters:{},created:function(){},mounted:function(){Object.assign(this.departmentParamBackup,this.departmentParam),this.getListEmployeeByDepartmentName();var e=this;i()(".selectClass").click(function(e){(e=e||window.event).stopPropagation()}),i()(document).click(function(t){e.isShowTree=!1,i()(".departmentWrap").hide()})},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{getListEmployeeByDepartmentName:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,o.a.getListEmployeeByDepartmentName(this.departmentName);case 3:t=e.sent,this.$Spin.hide(),a=t.data,this.departmentGroup[0].id=null,this.departmentGroup[0].name="",this.departmentGroup[0].children=[],this.departmentGroup[0].organizationId=[],this.departmentGroup[0].organizationName=[],this.departmentGroup[0].type=1,a&&a[0]&&(r=a[0],this.departmentGroup[0].id=r.id,this.departmentGroup[0].name=r.name,this.departmentGroup[0].children=r.children,this.departmentGroup[0].organizationId=r.organizationId,this.departmentGroup[0].organizationName=r.organizationName,this.departmentGroup[0].type=r.type);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),renderDepartmentTreeButton:function(e,t){var a=this,r=t.root,n=t.node,i=t.data,o=i.name;o.length>8&&(o=i.name.substring(0,8)+"...");var s;s=1===i.type?"md-cube":"md-menu";var l=[e("div",{style:{margin:"0px 5px 5px 5px"}},[e("a",{props:{},style:{color:"#fff",margin:"0 5px 5px"},directives:[{name:"privilege",value:"update-department"}],on:{click:function(){a.addOrUpdataDepartment(i,!0)}}},"编辑")]),e("div",{style:{margin:"0 5px 5px 5px"}},[e("a",{props:{},style:{color:"#fff",margin:"0 5px 5px"},directives:[{name:"privilege",value:"add-department"}],on:{click:function(){a.addOrUpdataDepartment(i,!1)}}},"添加")]),e("div",{style:{margin:"0 5px 5px 5px"}},[e("a",{props:{},style:{color:"#fff",margin:"0 5px 5px"},directives:[{name:"privilege",value:"delete-department"}],on:{click:function(){a.showDeleteModal(i)}}},"删除")])];return i.preId&&l.push(e("div",{style:{margin:"0 5px 5px 5px"}},[e("a",{props:{},style:{color:"#fff",margin:"0 5px 5px"},directives:[{name:"privilege",value:"delete-department"}],on:{click:function(){a.upOrDownDepartment(i.id,i.preId)}}},"上移")])),i.nextId&&l.push(e("div",{style:{margin:"0 5px 5px 5px"}},[e("a",{props:{},style:{color:"#fff",margin:"0 5px 5px"},directives:[{name:"privilege",value:"delete-department"}],on:{click:function(){a.upOrDownDepartment(i.id,i.nextId)}}},"下移")])),i.parentId&&1!==i.parentId&&l.push(e("div",{style:{margin:"0 5px 5px 5px"}},[e("a",{props:{},style:{color:"#fff",margin:"0 5px 5px"},directives:[{name:"privilege",value:"delete-department"}],on:{click:function(){a.upDepartmentGrade(i.id)}}},"升级")])),i.preId&&l.push(e("div",{style:{margin:"0 5px 5px 5px"}},[e("a",{props:{},style:{color:"#fff",margin:"0 5px 5px"},directives:[{name:"privilege",value:"delete-department"}],on:{click:function(){a.downDepartmentGrade(i.id,i.preId)}}},"降级")])),e("Tooltip",{props:{placement:"right"},style:{fontSize:"12px"}},[e("span",{style:{display:"inline-block"}},[e("span",[e("div",{props:{},style:{fontSize:"12px"}},[e("Icon",{props:{type:s},style:{marginRight:"8px"}}),e("Button",{props:Object.assign({}),class:["departmentSelect"],style:{border:"none",background:"#ffffff",padding:"4px 5px"},on:{click:function(e){a.loadEmployeeTable(e,r,n,i)}}},o)])])]),e("div",{slot:"content"},l)])},loadEmployeeTable:function(e,t,a,r){i()(".departmentSelect").css({background:"#ffffff",color:"black"});var n=e.target;"BUTTON"!==n.tagName?(n.parentNode.style.backgroundColor="#5cadff",n.parentNode.style.color="#ffffff"):(n.style.backgroundColor="#5cadff",n.style.color="#ffffff"),this.selectDepartment=r},hideDeleteAndOperationModal:function(){this.isShowDeleteModal=!1,this.isShowOperationModal=!1},hideCompanySettingModal:function(){this.isShowCompanySettingModal=!1},getOperationDepartmentData:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.departmentParam.name){e.next=3;break}return this.$Message.error("名称不能为空"),e.abrupt("return");case 3:if(this.$Spin.show(),!this.departmentParam.id){e.next=10;break}return e.next=7,o.a.updateDepartment(this.departmentParam);case 7:e.sent,e.next=13;break;case 10:return e.next=12,o.a.addDepartment(this.departmentParam);case 12:e.sent;case 13:this.$Spin.hide(),this.$Message.success("操作成功"),this.getListEmployeeByDepartmentName(),this.hideDeleteAndOperationModal(),this.hideCompanySettingModal();case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),deleteDepartment:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,o.a.deleteDepartment(this.departmentParam.id);case 3:e.sent,this.$Message.success("删除成功"),this.$Spin.hide(),this.getListEmployeeByDepartmentName(),this.hideDeleteModal();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addOrUpdataDepartment:function(e,t){this.selectEmployeeId=null,t?(this.departmentParam=Object.assign({},e),this.selectEmployeeId=e.managerId):this.departmentParam={parentName:e.name,parentId:e.id,type:1},this.isShowOperationModal=!0},showDeleteModal:function(e){var t;t=e?Object.assign({},e):Object.assign({},this.departmentGroup[0]),this.departmentParam={id:t.id,name:t.name},this.isShowDeleteModal=!0},hideDeleteModal:function(){this.departmentParam=Object.assign({},this.departmentParamBackup),this.isShowDeleteModal=!1},showTree:function(){this.isShowTree?(this.isShowTree=!1,i()(".departmentWrap").hide()):(this.isShowTree=!0,i()(".departmentWrap").show(),this.$refs.departmentEmployeeTree.resetSearch())},selectDepartmentEmployee:function(e){this.$set(this.departmentParam,"managerId",e.id),this.$set(this.departmentParam,"managerName",e.name),this.isShowTree=!1,i()(".departmentWrap").hide()},changeVisibleOperationModal:function(e){e?this.getProjects():(this.isShowTree=!1,i()(".departmentWrap").hide(),this.$refs.departmentEmployeeTree.generateTreeData())},upOrDownDepartment:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,o.a.upOrDown(t,a);case 3:e.sent,this.$Spin.hide(),this.$Message.success("操作成功"),this.getListEmployeeByDepartmentName();case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),upDepartmentGrade:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,o.a.upGrade(t);case 3:e.sent,this.$Message.success("升级成功"),this.$Spin.hide(),this.getListEmployeeByDepartmentName();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),downDepartmentGrade:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,o.a.downGrade(t,a);case 3:e.sent,this.$Message.success("降级成功"),this.$Spin.hide(),this.getListEmployeeByDepartmentName();case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),getProjects:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getProjects({pageNum:1,pageSize:200,sort:!1});case 2:t=e.sent,a=t.data,r=[],a.forEach(function(e){r.push({value:e.proId,label:e.proName})}),this.projectData=r;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),changeTeamPro:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.departmentParam.projectName=t.label,this.departmentParam.projectId=t.value;case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},y=(a("2c69"),Object(u.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{lg:5,md:8}},[a("Card",{staticClass:"warp-card",attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("培训团队")]),a("Row",[a("Input",{attrs:{placeholder:"输入团队名称"},on:{"on-change":e.getListEmployeeByDepartmentName},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}})],1),a("Tree",{staticStyle:{height:"485px","overflow-x":"scroll"},attrs:{data:e.departmentGroup,render:e.renderDepartmentTreeButton}})],1)],1),a("EmployeeTable",{attrs:{departments:e.departmentGroup,selectDepartment:e.selectDepartment}}),a("Modal",{attrs:{title:"添加团队"},on:{"on-visible-change":e.changeVisibleOperationModal},model:{value:e.isShowOperationModal,callback:function(t){e.isShowOperationModal=t},expression:"isShowOperationModal"}},[a("Form",{attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"名称",required:""}},[a("Input",{on:{"on-keydown":function(t){e.departmentParam.name=e.departmentParam.name.replace(/^ +| +$/g,"")},"on-keyup":function(t){e.departmentParam.name=e.departmentParam.name.replace(/^ +| +$/g,"")}},model:{value:e.departmentParam.name,callback:function(t){e.$set(e.departmentParam,"name",t)},expression:"departmentParam.name"}})],1),a("FormItem",{staticClass:"selectClass",attrs:{label:"负责人"}},[a("Input",{attrs:{placeholder:"请选择负责人",readonly:""},nativeOn:{click:function(t){return e.showTree(t)}},model:{value:e.departmentParam.managerName,callback:function(t){e.$set(e.departmentParam,"managerName",t)},expression:"departmentParam.managerName"}},[e.isShowTree?a("Icon",{attrs:{slot:"suffix",type:"ios-arrow-up"},slot:"suffix"}):a("Icon",{attrs:{slot:"suffix",type:"ios-arrow-down"},slot:"suffix"})],1),a("div",{staticClass:"departmentWrap"},[a("DepartmentEmployeeTree",{ref:"departmentEmployeeTree",attrs:{selectEmployeeId:e.selectEmployeeId},on:{"on-select":e.selectDepartmentEmployee}})],1)],1),a("FormItem",{attrs:{label:"所属项目"}},[a("Select",{staticClass:"form-width",model:{value:e.departmentParam.projectId,callback:function(t){e.$set(e.departmentParam,"projectId",t)},expression:"departmentParam.projectId"}},e._l(e.projectData,function(t){return a("Option",{key:t.value,attrs:{value:t.value},nativeOn:{click:function(a){return e.changeTeamPro(t)}}},[e._v(e._s(t.label))])}),1)],1),a("FormItem",{attrs:{label:"上级团队",required:""}},[a("Input",{attrs:{disabled:""},model:{value:e.departmentParam.parentName,callback:function(t){e.$set(e.departmentParam,"parentName",t)},expression:"departmentParam.parentName"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{size:"large",type:"primary"},on:{click:function(t){return e.getOperationDepartmentData()}}},[e._v("确定")]),a("Button",{attrs:{size:"large",type:"error"},on:{click:e.hideDeleteAndOperationModal}},[e._v("取消")])],1)],1),a("Modal",{attrs:{title:"删除确认"},model:{value:e.isShowDeleteModal,callback:function(t){e.isShowDeleteModal=t},expression:"isShowDeleteModal"}},[a("p",{staticStyle:{"font-size":"16px"}},[e._v("\n        确定要将\n        "),a("span",{staticStyle:{color:"red","font-size":"16px"}},[e._v(e._s(e.departmentParam.name))]),e._v("\n        部门删除吗？\n      ")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{size:"large",type:"primary"},on:{click:e.deleteDepartment}},[e._v("确定")]),a("Button",{attrs:{size:"large",type:"error"},on:{click:e.hideDeleteAndOperationModal}},[e._v("取消")])],1)]),a("Modal",{attrs:{title:"公司设置"},model:{value:e.isShowCompanySettingModal,callback:function(t){e.isShowCompanySettingModal=t},expression:"isShowCompanySettingModal"}},[a("Form",{attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"公司名称",required:""}},[a("Input",{attrs:{disabled:null!=e.departmentParam.id},on:{"on-keydown":function(t){e.departmentParam.name=e.departmentParam.name.replace(/^ +| +$/g,"")},"on-keyup":function(t){e.departmentParam.name=e.departmentParam.name.replace(/^ +| +$/g,"")}},model:{value:e.departmentParam.name,callback:function(t){e.$set(e.departmentParam,"name",t)},expression:"departmentParam.name"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[e.departmentParam.id?e._e():a("Button",{attrs:{size:"large",type:"primary"},on:{click:function(t){return e.getOperationDepartmentData()}}},[e._v("确定")]),a("Button",{attrs:{size:"large",type:"error"},on:{click:e.hideCompanySettingModal}},[e._v("取消")])],1)],1)],1)],1)},[],!1,null,"2f8437f3",null));t.default=y.exports},fcb9:function(e,t,a){}}]);