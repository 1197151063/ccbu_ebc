(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0aaf78"],{"12ef":function(t,e,a){"use strict";a.r(e);var r=(a("96cf"),a("1da1")),n=a("1e04"),o=function(){return Object(n.a)("/smartReload/all")},i=function(t){return Object(n.c)("/smartReload/update",t)},s=function(t){return Object(n.a)("/smartReload/result/".concat(t))},l={name:"SmartReloadList",components:{},props:{},data:function(){var t=this;return{tableLoading:!1,showResultModal:!1,editModal:!1,formData:{tag:"",identification:0,args:""},tableData:[],columns:[{title:"标签",key:"tag"},{title:"状态标识",key:"identification"},{title:"更新时间",key:"updateTime"},{title:"创建时间",key:"createTime"},{title:"操作",width:200,align:"center",render:function(e,a){return t.$tableAction(e,[{title:"执行Reload",directives:[{name:"privilege",value:"smart-reload-update"}],action:function(){t.editModal=!0,t.formData.tag=a.row.tag,t.formData.identification=a.row.identification}},{title:"查看结果",directives:[{name:"privilege",value:"smart-reload-result"}],action:function(){t.getSmartReloadResult(a.row.tag)}}])}}],resultData:[],resultColumns:[{type:"expand",width:50,render:function(t,e){return t("pre",{},e.row.exception)}},{title:"标签",key:"tag",width:150},{title:"状态标识",key:"identification"},{title:"参数",key:"args",width:100},{title:"结果",key:"result",render:function(t,e){return e.row.result?t("span",{style:{color:"#19be6b"}},"成功"):t("span",{style:{color:"#ed4014"}},"失败")}},{title:"异常信息",key:"exception",width:200,render:function(t,e){return e.row.result?t("span",{style:{color:"#19be6b"}},"无异常信息"):t("span",{style:{color:"#ed4014"}},"有异常信息，请点开Expand")}},{title:"创建时间",key:"createTime",width:180}]}},computed:{},watch:{},filters:{},created:function(){},mounted:function(){this.getSmartReloadList()},methods:{getSmartReloadList:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.tableLoading=!0,t.next=4,o();case 4:e=t.sent,this.tableData=e.data,this.tableLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),this.tableLoading=!1;case 13:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),updateSmartReloadData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.formData.identification){t.next=11;break}return this.$Spin.show(),t.next=4,i(this.formData);case 4:t.sent,this.$Spin.hide(),this.$Message.success("更新成功"),this.formData={},this.getSmartReloadList(),t.next=13;break;case 11:this.$Message.error("状态标示不能为空"),this.show=!0;case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getSmartReloadResult:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$Spin.show(),this.showResultModal=!0,t.next=4,s(e);case 4:a=t.sent,this.$Spin.hide(),this.resultData=a.data;case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},c=a("2877"),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{staticClass:"warp-card",attrs:{"dis-hover":""}},[a("Form",{staticClass:"tools",attrs:{inline:""}},[a("FormItem",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"smart-reload-search",expression:"'smart-reload-search'"}],attrs:{icon:"md-refresh",type:"primary"},on:{click:t.getSmartReloadList}},[t._v("刷新")])],1)],1),a("Alert",[a("h3",[t._v("SmartReload介绍：")]),a("pre",[t._v("简介：SmartReload是一个可以在不重启进程的情况下动态重新加载配置或者执行某些预先设置的代码。\n\n原理：\n- Java后端会在项目启动的时候开启一个Daemon线程，这个Daemon线程会每隔几秒轮询t_smart_item表的状态。\n- 如果【状态标识】与【上次状态标识】比较发生变化，会将参数传入SmartReload实现类，进行自定义操作。\n用途：\n· 用于刷新内存中的缓存\n· 用于执行某些后门代码\n· 用于进行Java热加载（前提是类结构不发生变化）\n· 其他不能重启服务的应用\n      ")])]),a("Table",{attrs:{columns:t.columns,data:t.tableData,loading:t.tableLoading,border:""}}),a("Modal",{attrs:{closable:!1,"mask-closable":!1,title:"编辑"},on:{"on-cancel":function(e){t.editModal=!1},"on-ok":t.updateSmartReloadData},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[a("Form",{attrs:{"label-width":80,model:t.formData}},[a("FormItem",{attrs:{label:"标签"}},[a("Input",{attrs:{disabled:"disabled"},model:{value:t.formData.tag,callback:function(e){t.$set(t.formData,"tag",e)},expression:"formData.tag"}})],1),a("FormItem",{attrs:{label:"状态标识"}},[a("Input",{attrs:{required:""},model:{value:t.formData.identification,callback:function(e){t.$set(t.formData,"identification",e)},expression:"formData.identification"}})],1),a("FormItem",{attrs:{label:"Reload参数(非必填)"}},[a("Input",{attrs:{autosize:{minRows:2,maxRows:5},placeholder:"传入SmartReload的参数",type:"textarea"},model:{value:t.formData.args,callback:function(e){t.$set(t.formData,"args",e)},expression:"formData.args"}})],1)],1)],1),a("Modal",{attrs:{closable:!1,"mask-closable":!1,title:"执行结果",width:"1000px"},model:{value:t.showResultModal,callback:function(e){t.showResultModal=e},expression:"showResultModal"}},[a("Table",{attrs:{columns:t.resultColumns,data:t.resultData,height:"500"}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.showResultModal=!1}}},[t._v("关闭")])],1)],1)],1)},[],!1,null,null,null);e.default=d.exports}}]);