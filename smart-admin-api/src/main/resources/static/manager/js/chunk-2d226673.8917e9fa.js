(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d226673"],{e909:function(e,t,a){"use strict";a.r(t);var i=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),n=(a("96cf"),a("1da1")),r=a("0bb4"),o=a("4963");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach(function(t){Object(i.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var u={name:"NoticeList",components:{},props:{},data:function(){var e=this;return{searchData:{title:""},modalType:"add",editModal:!1,addModal:!1,loading:!0,saveLoading:!0,updateLoading:!0,pageNum:1,pageSize:10,pageTotal:0,updateItem:{},saveItem:{},formData:{title:"",content:""},columns:[{title:"ID",width:60,key:"id"},{title:"消息标题",key:"title"},{title:"创建时间",key:"createTime"},{title:"消息创建人",key:"createUserName"},{title:"是否发送",key:"sendStatus",render:function(t,a){return t("span",e.$enum.getDescByValue("NOTICE_STATUS",a.row.sendStatus))}},{title:"操作",key:"action",align:"center",width:200,className:"action-hide",render:function(t,a){var i=[{title:"详情",directives:[{name:"privilege",value:"notice-detail"}],action:function(){e.$router.push({name:"NoticeDetail",params:{notice:a.row}})}},{title:"删除",directives:[{name:"privilege",value:"notice-delete"}],action:function(){e.$Modal.confirm({title:"删除",content:"确认删除该条消息么？",onOk:function(){e.deleteNotice(a.row.id)}})}}],n={title:"编辑",directives:[{name:"privilege",value:"notice-edit"}],action:function(){e.openModal("edit",a.row)}},r={title:"发送",directives:[{name:"privilege",value:"notice-send"}],action:function(){e.$Modal.confirm({title:"确认",content:"确认发送条消息么？",onOk:function(){e.sendNotice(a.row.id)}})}};return a.row.sendStatus!=o.a.YES.value&&i.push(n),a.row.sendStatus!=o.a.YES.value&&i.push(r),e.$tableAction(t,i)}}],data:[],formValidate:{title:[{required:!0,message:"请输入消息标题",trigger:"blur"}],content:[{required:!0,message:"请输入消息内容",trigger:"blur"}]}}},computed:{},watch:{},filters:{},created:function(){},mounted:function(){this.getNoticeList()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{getNoticeList:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,r.a.getNoticeList(c(c({},this.searchData),{},{pageNum:this.pageNum,pageSize:this.pageSize}));case 4:t=e.sent,this.loading=!1,this.data=t.data.list,this.pageTotal=t.data.total,this.pageNum=t.data.pageNum,this.pageSize=t.data.pageSize,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),getNoticeDetail:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,r.a.getNoticeDetail(t);case 4:a=e.sent,this.loading=!1,this.formData=a.data,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),this.loading=!0;case 13:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),openModal:function(e,t){switch(this.modalType=e,e){case"add":this.formData={},this.editModal=!0;break;case"edit":this.getNoticeDetail(t.id),this.editModal=!0}},changePage:function(e){this.pageNum=e,this.getNoticeList()},changePageSize:function(e){this.pageNum=1,this.pageSize=e,this.getNoticeList()},deleteNotice:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,r.a.deleteNotice(t);case 3:e.sent,this.$Spin.hide(),this.$Message.success("删除消息成功!"),this.getNoticeList();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),sendNotice:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,r.a.sendNotice(t);case 3:e.sent,this.$Message.success("发送消息成功!"),this.$Spin.hide(),this.getNoticeList();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addOrUpdateNotice:function(){var e=this;try{this.$refs.formRef.validate(function(t){t&&("add"==e.modalType?e.addNotice():e.editNotice())})}catch(e){}},editNotice:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,r.a.updateNotice(this.formData);case 4:e.sent,this.$Message.success("修改成功"),this.editModal=!1,this.getNoticeList(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.loading=!1;case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),addNotice:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,r.a.addNotice(this.formData);case 4:e.sent,this.$Message.success("添加成功"),this.editModal=!1,this.getNoticeList(),this.loading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.loading=!1;case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}(),cancelSave:function(){this.editModal=!1,this.$refs.formRef.resetFields()},refresh:function(){this.pageNum=1,this.searchData.title="",this.getNoticeList()}}},l=a("2877"),d=Object(l.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticClass:"warp-card",attrs:{"dis-hover":""}},[a("Form",{staticClass:"tools",attrs:{inline:""}},[a("FormItem",{directives:[{name:"privilege",rawName:"v-privilege",value:"notice-query",expression:"'notice-query'"}]},[a("Input",{attrs:{placeholder:"请输入消息标题"},model:{value:e.searchData.title,callback:function(t){e.$set(e.searchData,"title",t)},expression:"searchData.title"}})],1),a("FormItem",[a("ButtonGroup",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"notice-query",expression:"'notice-query'"}],attrs:{icon:"ios-search",type:"primary"},on:{click:e.getNoticeList}},[e._v("查询")]),a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"notice-query",expression:"'notice-query'"}],attrs:{icon:"md-refresh",type:"default"},on:{click:e.refresh}},[e._v("重置")])],1)],1),a("FormItem",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"notice-add",expression:"'notice-add'"}],attrs:{icon:"md-add",type:"primary"},on:{click:function(t){return e.openModal("add")}}},[e._v("添加消息")])],1)],1),a("Table",{attrs:{columns:e.columns,data:e.data,loading:e.loading,border:""}}),a("Page",{staticStyle:{margin:"24px 0","text-align":"right"},attrs:{current:e.pageNum,"page-size":e.pageSize,"page-size-opts":[10,20,30,50,100],total:e.pageTotal,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1),a("Modal",{attrs:{loading:e.saveLoading,title:"add"==e.modalType?"添加":"修改"},on:{"on-cancel":e.cancelSave,"on-ok":e.addOrUpdateNotice},model:{value:e.editModal,callback:function(t){e.editModal=t},expression:"editModal"}},[a("Form",{ref:"formRef",attrs:{"label-width":80,model:e.formData,rules:e.formValidate}},[a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入消息标题"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("FormItem",{attrs:{label:"内容",prop:"content"}},[a("Input",{attrs:{autosize:{minRows:2,maxRows:5},placeholder:"请输入消息内容",type:"textarea"},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1)],1)],1)],1)},[],!1,null,null,null);t.default=d.exports}}]);