(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d208c39"],{a5d3:function(e,t,a){"use strict";a.r(t);var r=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=(a("96cf"),a("1da1")),o=a("53ca"),s=a("1e04"),n=function(e){return Object(s.c)("/systemConfig/getListPage",e)},c=function(e){return Object(s.c)("/systemConfig/add",e)},l=function(e){return Object(s.c)("/systemConfig/update",e)};function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var d={name:"SystemConfig",components:{},props:{},data:function(){var e=this;return{pageShow:!0,searchValue:"",searchType:"BY_KEY",editModal:!1,addModal:!1,valueModal:!1,loading:!0,saveLoading:!0,updateLoading:!0,pageNum:1,pageSize:10,pageTotal:0,updateItem:{id:0,configKey:"",configName:"",configValue:"",remark:""},saveItem:{configKey:"",configName:"",configValue:"",configGroup:"",remark:""},valueData:"",columns:[{title:"ID",key:"id",width:60},{title:"Key",key:"configKey"},{title:"标题",key:"configName"},{title:"值",key:"configValue",width:200,ellipsis:!0,tooltip:!0},{title:"参数类别",key:"configGroup"},{title:"备注",key:"remark"},{title:"操作",key:"action",align:"center",width:200,className:"action-hide",render:function(t,a){return e.$tableAction(t,[{title:"编辑",directives:[{name:"privilege",value:"system-config-update"}],action:function(){e.updateItem.id=a.row.id,e.updateItem.configGroup=a.row.configGroup,e.updateItem.configKey=a.row.configKey,e.updateItem.configName=a.row.configName,e.updateItem.configValue=a.row.configValue,e.updateItem.remark=a.row.remark,e.editModal=!0}},{title:"查看值",directives:[{name:"privilege",value:"system-config-search"}],action:function(){try{var t=JSON.parse(a.row.configValue);"object"===Object(o.a)(t)&&t?e.valueData=t:e.valueData=a.row.configValue}catch(t){e.valueData=a.row.configValue}e.valueModal=!0}}])}}],data:[],updateValidate:{configValue:[{required:!0,message:"请输入值",trigger:"blur"}]},saveValidate:{configKey:[{required:!0,message:"请输入Key",trigger:"blur"}],configName:[{required:!0,message:"请输入标题",trigger:"blur"}],configValue:[{required:!0,message:"请输入值",trigger:"blur"}],configGroup:[{required:!0,message:"请输入参数类别",trigger:"blur"}]}}},computed:{},watch:{},filters:{},created:function(){},mounted:function(){this.getSystemConfigList()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{getSystemConfigList:function(){var e=Object(i.a)(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,this.pageShow=!0,t={},"BY_KEY"===this.searchType?t.key=this.searchValue:t.configGroup=this.searchValue,e.next=6,n(p(p({},t),{},{pageNum:this.pageNum,pageSize:this.pageSize}));case 6:a=e.sent,this.loading=!1,this.data=a.data.list,this.pageTotal=a.data.total,this.pageNum=a.data.pageNum,this.pageSize=a.data.pageSize;case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),changePage:function(e){this.pageNum=e,this.getSystemConfigList()},changePageSize:function(e){this.pageNum=1,this.pageSize=e,this.getSystemConfigList()},handleUpdate:function(){var e=this;this.$refs.updateRef.validate(function(t){t&&e.updateSystemConfig()})},updateSystemConfig:function(){var e=Object(i.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$Spin.show(),e.next=3,l(this.updateItem);case 3:e.sent,this.$Spin.hide(),this.$Message.success("修改成功"),this.getSystemConfigList(),this.cancelUpdate();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),searchSystemConfigList:function(){this.pageNum=1,this.getSystemConfigList()},handleSave:function(){var e=this;try{this.$refs.saveRef.validate(function(t){t&&e.addSystemConfig()})}catch(e){}},addSystemConfig:function(){var e=Object(i.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.saveLoading=!0,e.next=4,c(this.saveItem);case 4:e.sent,this.saveLoading=!1,this.$Message.success("添加成功"),this.getSystemConfigList(),this.cancelSave(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),this.saveLoading=!1;case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}(),cancelSave:function(){this.saveItem={},this.$refs.saveRef.resetFields(),this.addModal=!1},cancelValueModal:function(){this.valueData="",this.valueModal=!1},cancelUpdate:function(){this.updateItem={},this.$refs.updateRef.resetFields(),this.editModal=!1},refresh:function(){this.pageNum=1,this.searchType="BY_KEY",this.searchValue="",this.getSystemConfigList()}}},m=a("2877"),g=Object(m.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticClass:"warp-card",attrs:{"dis-hover":""}},[a("Form",{staticClass:"tools",attrs:{inline:""}},[a("FormItem",[a("Input",{directives:[{name:"privilege",rawName:"v-privilege",value:"system-params-search",expression:"'system-params-search'"}],attrs:{placeholder:"请输入"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[a("Select",{staticStyle:{width:"120px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},[a("Option",{attrs:{value:"BY_KEY"}},[e._v("按key")]),a("Option",{attrs:{value:"BY_GROUP"}},[e._v("按参数类别")])],1)],1)],1),a("FormItem",[a("ButtonGroup",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"system-params-search",expression:"'system-params-search'"}],attrs:{icon:"ios-search",type:"primary"},on:{click:e.searchSystemConfigList}},[e._v("查询")]),a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"system-params-search",expression:"'system-params-search'"}],attrs:{icon:"md-refresh",type:"default"},on:{click:e.refresh}},[e._v("重置")])],1)],1),a("FormItem",[a("Button",{directives:[{name:"privilege",rawName:"v-privilege",value:"system-params-add",expression:"'system-params-add'"}],attrs:{icon:"md-add",type:"primary"},on:{click:function(t){e.addModal=!0}}},[e._v("添加")])],1)],1),a("Table",{attrs:{columns:e.columns,data:e.data,loading:e.loading,pageNumber:e.pageNum,pageShow:e.pageShow,border:""}}),a("Page",{staticStyle:{margin:"24px 0","text-align":"right"},attrs:{current:e.pageNum,"page-size":e.pageSize,total:e.pageTotal,"show-elevator":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1),a("Modal",{attrs:{title:"编辑"},on:{"on-cancel":e.cancelUpdate,"on-ok":e.handleUpdate},model:{value:e.editModal,callback:function(t){e.editModal=t},expression:"editModal"}},[a("Form",{ref:"updateRef",attrs:{"label-width":80,model:e.updateItem,rules:e.updateValidate}},[a("FormItem",{attrs:{label:"Key"}},[a("Input",{attrs:{disabled:"disabled"},model:{value:e.updateItem.configKey,callback:function(t){e.$set(e.updateItem,"configKey",t)},expression:"updateItem.configKey"}})],1),a("FormItem",{attrs:{label:"标题"}},[a("Input",{attrs:{disabled:"disabled",type:"textarea"},model:{value:e.updateItem.configName,callback:function(t){e.$set(e.updateItem,"configName",t)},expression:"updateItem.configName"}})],1),a("FormItem",{attrs:{label:"参数类别",prop:"configGroup"}},[a("Input",{attrs:{disabled:"disabled",placeholder:"请输入数据类型(必填)"},model:{value:e.updateItem.configGroup,callback:function(t){e.$set(e.updateItem,"configGroup",t)},expression:"updateItem.configGroup"}})],1),a("FormItem",{attrs:{label:"值",prop:"configValue"}},[a("Input",{attrs:{autosize:{minRows:5},placeholder:"请输入值(必填)",type:"textarea"},model:{value:e.updateItem.configValue,callback:function(t){e.$set(e.updateItem,"configValue",t)},expression:"updateItem.configValue"}})],1),a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{autosize:{minRows:4},placeholder:"请输入备注",type:"textarea"},model:{value:e.updateItem.remark,callback:function(t){e.$set(e.updateItem,"remark",t)},expression:"updateItem.remark "}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:e.cancelUpdate}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:e.handleUpdate}},[e._v("确定")])],1)],1),a("Modal",{attrs:{title:"添加"},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[a("Form",{ref:"saveRef",attrs:{"label-width":80,model:e.saveItem,rules:e.saveValidate}},[a("FormItem",{attrs:{label:"Key",prop:"configKey"}},[a("Input",{attrs:{placeholder:"请输入key(必填)"},model:{value:e.saveItem.configKey,callback:function(t){e.$set(e.saveItem,"configKey",t)},expression:"saveItem.configKey"}})],1),a("FormItem",{attrs:{label:"标题",prop:"configName"}},[a("Input",{attrs:{placeholder:"请输入标题(必填)"},model:{value:e.saveItem.configName,callback:function(t){e.$set(e.saveItem,"configName",t)},expression:"saveItem.configName"}})],1),a("FormItem",{attrs:{label:"参数类别",prop:"configGroup"}},[a("Input",{attrs:{placeholder:"请输入数据类型(必填)"},model:{value:e.saveItem.configGroup,callback:function(t){e.$set(e.saveItem,"configGroup",t)},expression:"saveItem.configGroup"}})],1),a("FormItem",{attrs:{label:"值",prop:"configValue"}},[a("Input",{attrs:{autosize:{minRows:5},placeholder:"请输入值(必填)",type:"textarea"},model:{value:e.saveItem.configValue,callback:function(t){e.$set(e.saveItem,"configValue",t)},expression:"saveItem.configValue"}})],1),a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{autosize:{minRows:4},placeholder:"请输入备注",type:"textarea"},model:{value:e.saveItem.remark,callback:function(t){e.$set(e.saveItem,"remark",t)},expression:"saveItem.remark "}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:e.cancelSave}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确定")])],1)],1),a("Modal",{attrs:{closable:!1,"mask-closable":!1,title:"值查看"},model:{value:e.valueModal,callback:function(t){e.valueModal=t},expression:"valueModal"}},[a("json-viewer",{attrs:{"expand-depth":10,value:e.valueData,boxed:"",copyable:"",sort:""}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.cancelValueModal}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);t.default=g.exports}}]);